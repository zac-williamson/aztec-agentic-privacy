(()=>{var e={};e.id=28,e.ids=[28],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1696:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d}),s(1723),s(8463),s(5866);var a=s(3191),n=s(8716),r=s(7922),i=s.n(r),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["audit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1723)),"/home/ec2-user/aztec-agent/project/frontend/app/audit/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,8463)),"/home/ec2-user/aztec-agent/project/frontend/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],c=["/home/ec2-user/aztec-agent/project/frontend/app/audit/page.tsx"],x="/audit/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/audit/page",pathname:"/audit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9626:(e,t,s)=>{Promise.resolve().then(s.bind(s,6351))},6351:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(326),n=s(7577),r=s(3134),i=s(2469),l=s(4753),o=s(9179);function d(){let{sdk:e,myAttestations:t,refreshAttestations:s}=(0,l.c)(),[r,d]=(0,n.useState)(""),[c,x]=(0,n.useState)(null),[m,u]=(0,n.useState)(80),[p,h]=(0,n.useState)("idle"),[g,f]=(0,n.useState)(),[b,v]=(0,n.useState)(),j=(0,n.useCallback)(async e=>{d(await (0,o.ri)(e)),x(e.name)},[]),y=(0,n.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&j(t)},[j]),N=(0,n.useCallback)(async()=>{if(e&&r.trim()){h("proving"),f(void 0),v(void 0);try{let t=await e.attest({skillHash:r.trim(),quality:m},e=>h(e));h("done"),f(t.txHash),s()}catch(e){h("error"),v(e instanceof Error?e.message:"Attestation failed")}}},[e,r,m,s]),k=(0,n.useCallback)(()=>{h("idle"),d(""),x(null),u(80),f(void 0),v(void 0)},[]),w="proving"===p||"submitting"===p,C=t.some(e=>e.skillHash.toLowerCase()===r.toLowerCase().trim()&&!e.revoked),P=m>=80?"Trusted":m>=50?"Cautious":"Risky",_=m>=80?"text-signal-trusted":m>=50?"text-signal-caution":"text-signal-danger";return(0,a.jsxs)("div",{className:"border border-wire rounded-lg overflow-hidden",children:[a.jsx("div",{className:"border-b border-wire bg-void-100 px-4 py-3",children:a.jsx("h2",{className:"font-mono text-sm text-ink",children:"Submit Attestation"})}),(0,a.jsxs)("div",{className:"p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx("label",{className:"font-mono text-xs text-ink-muted",children:"Skill hash or file"}),(0,a.jsxs)("div",{className:"upload-zone rounded p-4 text-center cursor-pointer",onDragOver:e=>e.preventDefault(),onDrop:y,onClick:()=>document.getElementById("audit-file-input")?.click(),children:[a.jsx("input",{id:"audit-file-input",type:"file",className:"hidden",onChange:e=>e.target.files?.[0]&&j(e.target.files[0])}),c?(0,a.jsxs)("div",{className:"space-y-1",children:[a.jsx("p",{className:"font-mono text-xs text-amber",children:c}),(0,a.jsxs)("p",{className:"font-mono text-xs text-ink-muted truncate",children:[r.slice(0,32),"..."]})]}):(0,a.jsxs)("p",{className:"font-mono text-xs text-ink-muted",children:[a.jsx("span",{className:"text-ink hover:text-amber transition-colors",children:"Drop or click to upload skill file"})," ","— hash computed locally"]})]}),a.jsx("input",{type:"text",value:r,onChange:e=>{d(e.target.value),x(null)},placeholder:"or paste 0x hash directly...",className:" w-full bg-void-100 border border-wire rounded px-3 py-2 font-mono text-xs text-ink placeholder-ink-faint focus:border-amber transition-colors "}),C&&a.jsx("p",{className:"font-mono text-xs text-signal-caution",children:"⚠ You have already attested this skill. Double-attestation is prevented by ZK nullifier."})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"font-mono text-xs text-ink-muted",children:"Quality score"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-mono text-xs ${_}`,children:P}),a.jsx("span",{className:"font-mono text-lg font-bold text-ink tabular-nums",children:m}),a.jsx("span",{className:"font-mono text-xs text-ink-faint",children:"/ 100"})]})]}),a.jsx("input",{type:"range",min:0,max:100,value:m,onChange:e=>u(Number(e.target.value)),className:"w-full",disabled:w}),(0,a.jsxs)("div",{className:"flex justify-between font-mono text-xs text-ink-faint",children:[a.jsx("span",{children:"0 — do not install"}),a.jsx("span",{children:"50 — use with caution"}),a.jsx("span",{children:"100 — fully trusted"})]})]}),a.jsx(i.Z,{phase:p,txHash:g,error:b,onDismiss:"done"===p?k:void 0}),"done"!==p&&a.jsx("button",{onClick:N,disabled:w||!r.trim()||C,className:" w-full py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-30 disabled:cursor-not-allowed ",children:w?(0,a.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-amber animate-pulse"}),"proving"===p?"Generating ZK proof...":"Submitting..."]}):"Attest — anonymous ZK proof"}),a.jsx("p",{className:"font-mono text-xs text-ink-faint text-center leading-relaxed",children:"Your identity will not appear in public state. Only the trust score increments. Proof generation takes 3–60 seconds depending on hardware."})]})]})}function c(){let{sdk:e,myAttestations:t,refreshAttestations:s}=(0,l.c)(),[r,o]=(0,n.useState)(null),[d,c]=(0,n.useState)("idle"),[x,m]=(0,n.useState)(),[u,p]=(0,n.useState)(),h=(0,n.useCallback)(async t=>{if(e){o(t.skillHash),c("proving"),m(void 0),p(void 0);try{let a=await e.revokeAttestation(t.skillHash,e=>c(e));c("done"),m(a.txHash),s(),setTimeout(()=>{o(null),c("idle")},3e3)}catch(e){c("error"),p(e instanceof Error?e.message:"Revocation failed")}}},[e,s]),g=t.filter(e=>!e.revoked),f=t.filter(e=>e.revoked);return(0,a.jsxs)("div",{className:"border border-wire rounded-lg overflow-hidden",children:[(0,a.jsxs)("div",{className:"border-b border-wire bg-void-100 px-4 py-3 flex items-center justify-between",children:[a.jsx("h2",{className:"font-mono text-sm text-ink",children:"Your Attestation History"}),a.jsx("span",{className:"font-mono text-xs text-ink-muted",children:"private — only visible in your PXE"})]}),(0,a.jsxs)("div",{className:"divide-y divide-wire",children:[0===t.length&&(0,a.jsxs)("div",{className:"p-6 text-center",children:[a.jsx("p",{className:"font-mono text-sm text-ink-muted",children:"No attestations yet."}),a.jsx("p",{className:"font-mono text-xs text-ink-faint mt-1",children:"Attest a skill to build your private audit history."})]}),g.map(e=>{let t=r===e.skillHash&&"idle"!==d,s=Math.floor((Date.now()-e.timestamp.getTime())/864e5),n=0===s?"just now":1===s?"1 day ago":`${s} days ago`;return(0,a.jsxs)("div",{className:"p-4 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1 min-w-0",children:[(0,a.jsxs)("div",{className:"font-mono text-xs text-ink break-all",children:[e.skillHash.slice(0,20),"...",e.skillHash.slice(-8)]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("span",{className:"font-mono text-xs text-ink-muted",children:["quality: ",a.jsx("span",{className:"text-signal-trusted",children:e.quality})]}),a.jsx("span",{className:"font-mono text-xs text-ink-faint",children:n})]})]}),!t&&a.jsx("button",{onClick:()=>h(e),className:" shrink-0 px-3 py-1 rounded border border-wire text-xs font-mono text-ink-muted hover:border-signal-danger hover:text-signal-danger transition-colors ",children:"Revoke"})]}),t&&a.jsx(i.Z,{phase:d,txHash:x,error:u})]},e.txHash)}),f.length>0&&a.jsx("div",{className:"p-4",children:(0,a.jsxs)("details",{className:"group",children:[(0,a.jsxs)("summary",{className:"font-mono text-xs text-ink-faint cursor-pointer hover:text-ink-muted",children:[f.length," revoked attestation",f.length>1?"s":""]}),a.jsx("div",{className:"mt-3 space-y-2",children:f.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 opacity-50",children:[(0,a.jsxs)("span",{className:"font-mono text-xs text-ink-muted line-through break-all",children:[e.skillHash.slice(0,20),"..."]}),a.jsx("span",{className:"font-mono text-xs text-signal-danger",children:"revoked"})]},e.txHash))})]})})]})]})}function x(){return(0,a.jsxs)("div",{className:"space-y-10",children:[(0,a.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,a.jsxs)("h1",{className:"font-mono text-2xl text-ink",children:[a.jsx("span",{className:"text-amber",children:"⬡"})," Auditor Dashboard"]}),a.jsx("p",{className:"font-mono text-sm text-ink-muted max-w-2xl leading-relaxed",children:"Submit anonymous attestations for skills you have examined. A ZK proof is generated locally — your identity never appears in public contract state. Only the aggregate trust score is visible to anyone."})]}),a.jsx(r.Z,{message:"Connect your wallet to submit attestations and view your private audit history.",children:(0,a.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[a.jsx(d,{}),a.jsx(c,{})]})})]})}},2469:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(326),n=s(7577);let r={idle:{label:"",detail:"",color:"bg-amber",pulse:!1},proving:{label:"Generating ZK proof",detail:"This takes 3–60 seconds depending on hardware. Your identity is never revealed.",color:"bg-amber",pulse:!0},submitting:{label:"Proof verified — submitting transaction",detail:"Broadcasting to the Aztec network...",color:"bg-signal-caution",pulse:!0},done:{label:"Transaction confirmed",detail:"",color:"bg-signal-trusted",pulse:!1},error:{label:"Transaction failed",detail:"",color:"bg-signal-danger",pulse:!1}};function i({phase:e,txHash:t,error:s,onDismiss:i}){let[l,o]=(0,n.useState)(0);if("idle"===e)return null;let d=r[e];return(0,a.jsxs)("div",{className:`
      rounded border p-4 space-y-3
      ${"done"===e?"border-signal-trusted/30 bg-signal-trusted/5":""}
      ${"error"===e?"border-signal-danger/30 bg-signal-danger/5":""}
      ${"proving"===e||"submitting"===e?"border-amber/30 bg-amber/5":""}
    `,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`
            w-2 h-2 rounded-full shrink-0
            ${d.color}
            ${d.pulse?"animate-pulse":""}
          `}),a.jsx("span",{className:"font-mono text-sm text-ink",children:d.label}),"proving"===e&&(0,a.jsxs)("span",{className:"font-mono text-xs text-ink-muted ml-auto",children:[l,"s"]}),("done"===e||"error"===e)&&i&&a.jsx("button",{onClick:i,className:"ml-auto text-ink-muted hover:text-ink text-xs font-mono",children:"dismiss"})]}),d.detail&&a.jsx("p",{className:"text-xs text-ink-muted font-mono",children:d.detail}),("proving"===e||"submitting"===e)&&a.jsx("div",{className:"relative h-0.5 bg-wire overflow-hidden rounded-full",children:a.jsx("div",{className:"absolute inset-y-0 w-1/3 bg-amber/60 scanline rounded-full"})}),"done"===e&&t&&(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[a.jsx("span",{className:"text-xs text-ink-muted font-mono",children:"tx:"}),(0,a.jsxs)("a",{href:"#",className:"font-mono text-xs text-signal-trusted hover:underline break-all",title:t,children:[t.slice(0,18),"...",t.slice(-8)]})]}),"error"===e&&s&&a.jsx("p",{className:"text-xs text-signal-danger font-mono",children:s}),"proving"===e&&a.jsx("p",{className:"text-xs text-ink-faint font-mono border-t border-wire pt-2",children:"⬡ Your identity will not appear in public state. Only the trust score increments."})]})}},3134:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s(326),n=s(4753);function r({children:e,message:t="Connect your wallet to use this feature."}){let{isConnected:s,connect:r,isConnecting:i,error:l}=(0,n.c)();return s?a.jsx(a.Fragment,{children:e}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 gap-6",children:[a.jsx("div",{className:"text-4xl text-wire-100 font-mono select-none",children:"⬡"}),(0,a.jsxs)("div",{className:"text-center space-y-2",children:[a.jsx("p",{className:"text-ink-muted font-mono text-sm",children:t}),a.jsx("p",{className:"text-ink-faint font-mono text-xs",children:"false"===process.env.NEXT_PUBLIC_USE_MOCK?"Requires a running Aztec PXE at localhost:8080":"Demo mode — no real wallet required"})]}),l&&a.jsx("p",{className:"font-mono text-xs text-signal-danger max-w-sm text-center",children:l}),a.jsx("button",{onClick:r,disabled:i,className:" px-6 py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2 ",children:i?(0,a.jsxs)(a.Fragment,{children:[a.jsx("span",{className:"w-2 h-2 rounded-full bg-amber animate-pulse"}),"Connecting to PXE..."]}):"Connect Wallet"})]})}},1723:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});var a=s(8570);let n=(0,a.createProxy)(String.raw`/home/ec2-user/aztec-agent/project/frontend/app/audit/page.tsx`),{__esModule:r,$$typeof:i}=n;n.default;let l=(0,a.createProxy)(String.raw`/home/ec2-user/aztec-agent/project/frontend/app/audit/page.tsx#default`)}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[24,797],()=>s(1696));module.exports=a})();