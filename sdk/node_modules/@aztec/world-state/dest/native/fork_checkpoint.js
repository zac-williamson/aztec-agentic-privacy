export class ForkCheckpoint {
    fork;
    completed;
    constructor(fork){
        this.fork = fork;
        this.completed = false;
    }
    static async new(fork) {
        await fork.createCheckpoint();
        return new ForkCheckpoint(fork);
    }
    async commit() {
        if (this.completed) {
            return;
        }
        await this.fork.commitCheckpoint();
        this.completed = true;
    }
    async revert() {
        if (this.completed) {
            return;
        }
        await this.fork.revertCheckpoint();
        this.completed = true;
    }
}
