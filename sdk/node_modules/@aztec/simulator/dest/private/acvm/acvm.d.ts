import { type Logger, type LoggerBindings } from '@aztec/foundation/log';
import { type ExecutionError, type ForeignCallInput, type ForeignCallOutput } from '@aztec/noir-acvm_js';
import type { FunctionDebugMetadata } from '@aztec/stdlib/abi';
import type { NoirCallStack } from '@aztec/stdlib/errors';
import type { ACVMWitness } from './acvm_types.js';
/**
 * The callback interface for the ACIR.
 */
export type ACIRCallback = Record<string, (...args: ForeignCallInput[]) => Promise<ForeignCallOutput[]>>;
export type ACIRCallbackStats = {
    times: number[];
};
/**
 * The result of executing an ACIR.
 */
export interface ACIRExecutionResult {
    /**
     * An execution result contains two witnesses.
     * 1. The partial witness of the execution.
     * 2. The return witness which contains the given public return values within the full witness.
     */
    partialWitness: ACVMWitness;
    returnWitness: ACVMWitness;
    oracles?: Record<string, ACIRCallbackStats>;
}
/**
 * The function call that executes an ACIR.
 * @param acir - The ACIR circuit bytecode to execute.
 * @param initialWitness - The initial witness map defining all of the inputs to `circuit`.
 * @param callback - A callback to process any foreign calls from the circuit.
 * @param logger - Optional logger for ACVM execution logs.
 * @returns The solved witness calculated by executing the circuit on the provided inputs, as well as the return
 * witness indices as specified by the circuit.
 */
export declare function acvm(acir: Buffer, initialWitness: ACVMWitness, callback: ACIRCallback, loggerOrBindings?: Logger | LoggerBindings): Promise<ACIRExecutionResult>;
/**
 * Extracts the call stack from an thrown by the acvm.
 * @param error - The error to extract from.
 * @param debug - The debug metadata of the function called.
 * @returns The call stack, if available.
 */
export declare function extractCallStack(error: Error | ExecutionError, debug?: FunctionDebugMetadata): NoirCallStack | undefined;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWN2bS5kLnRzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3ByaXZhdGUvYWN2bS9hY3ZtLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxLQUFLLE1BQU0sRUFBRSxLQUFLLGNBQWMsRUFBaUIsTUFBTSx1QkFBdUIsQ0FBQztBQUN4RixPQUFPLEVBQ0wsS0FBSyxjQUFjLEVBQ25CLEtBQUssZ0JBQWdCLEVBQ3JCLEtBQUssaUJBQWlCLEVBRXZCLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxLQUFLLEVBQUUscUJBQXFCLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUMvRCxPQUFPLEtBQUssRUFBRSxhQUFhLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUcxRCxPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUVuRDs7R0FFRztBQUNILE1BQU0sTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsSUFBSSxFQUFFLGdCQUFnQixFQUFFLEtBQUssT0FBTyxDQUFDLGlCQUFpQixFQUFFLENBQUMsQ0FBQyxDQUFDO0FBRXpHLE1BQU0sTUFBTSxpQkFBaUIsR0FBRztJQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsQ0FBQTtDQUFFLENBQUM7QUFFcEQ7O0dBRUc7QUFDSCxNQUFNLFdBQVcsbUJBQW1CO0lBQ2xDOzs7O09BSUc7SUFDSCxjQUFjLEVBQUUsV0FBVyxDQUFDO0lBQzVCLGFBQWEsRUFBRSxXQUFXLENBQUM7SUFDM0IsT0FBTyxDQUFDLEVBQUUsTUFBTSxDQUFDLE1BQU0sRUFBRSxpQkFBaUIsQ0FBQyxDQUFDO0NBQzdDO0FBRUQ7Ozs7Ozs7O0dBUUc7QUFDSCx3QkFBc0IsSUFBSSxDQUN4QixJQUFJLEVBQUUsTUFBTSxFQUNaLGNBQWMsRUFBRSxXQUFXLEVBQzNCLFFBQVEsRUFBRSxZQUFZLEVBQ3RCLGdCQUFnQixDQUFDLEVBQUUsTUFBTSxHQUFHLGNBQWMsR0FDekMsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBdUM5QjtBQUVEOzs7OztHQUtHO0FBQ0gsd0JBQWdCLGdCQUFnQixDQUM5QixLQUFLLEVBQUUsS0FBSyxHQUFHLGNBQWMsRUFDN0IsS0FBSyxDQUFDLEVBQUUscUJBQXFCLEdBQzVCLGFBQWEsR0FBRyxTQUFTLENBYzNCIn0=