import { parseTransaction } from 'viem';
export function createViemSigner(client) {
    const signer = async (tx, _address)=>{
        const signedTx = await client.signTransaction(tx);
        const parsed = parseTransaction(signedTx);
        if (!parsed.r || !parsed.s || parsed.yParity !== 0 && parsed.yParity !== 1) {
            throw new Error('Failed to extract signature from viem signed transaction');
        }
        return {
            r: parsed.r,
            s: parsed.s,
            yParity: parsed.yParity
        };
    };
    return signer;
}
