import { MAX_TX_LIFETIME } from '@aztec/constants';
/**
 * Finds the highest aged and the highest finalized tagging indexes.
 */ export function findHighestIndexes(privateLogsWithIndexes, currentTimestamp, finalizedBlockNumber) {
    let highestAgedIndex = undefined;
    let highestFinalizedIndex = undefined;
    for (const { log, taggingIndex } of privateLogsWithIndexes){
        const ageInSeconds = currentTimestamp - log.blockTimestamp;
        if (ageInSeconds >= BigInt(MAX_TX_LIFETIME) && (highestAgedIndex === undefined || taggingIndex > highestAgedIndex)) {
            highestAgedIndex = taggingIndex;
        }
        if (log.blockNumber <= finalizedBlockNumber && (highestFinalizedIndex === undefined || taggingIndex > highestFinalizedIndex)) {
            highestFinalizedIndex = taggingIndex;
        }
    }
    return {
        highestAgedIndex,
        highestFinalizedIndex
    };
}
