import { Fr } from '@aztec/foundation/curves/bn254';
import type { KeyStore } from '@aztec/key-store';
import { type CircuitSimulator } from '@aztec/simulator/client';
import type { FunctionCall } from '@aztec/stdlib/abi';
import { FunctionSelector } from '@aztec/stdlib/abi';
import type { AuthWitness } from '@aztec/stdlib/auth-witness';
import { AztecAddress } from '@aztec/stdlib/aztec-address';
import type { AztecNode } from '@aztec/stdlib/interfaces/server';
import { type PrivateKernelExecutionProofOutput, PrivateKernelTailCircuitPublicInputs } from '@aztec/stdlib/kernel';
import { BlockHeader, PrivateExecutionResult, TxExecutionRequest } from '@aztec/stdlib/tx';
import type { AccessScopes } from '../access_scopes.js';
import type { ContractSyncService } from '../contract_sync/contract_sync_service.js';
import type { AddressStore } from '../storage/address_store/address_store.js';
import type { CapsuleStore } from '../storage/capsule_store/capsule_store.js';
import type { ContractStore } from '../storage/contract_store/contract_store.js';
import type { NoteStore } from '../storage/note_store/note_store.js';
import type { PrivateEventStore } from '../storage/private_event_store/private_event_store.js';
import type { RecipientTaggingStore } from '../storage/tagging_store/recipient_tagging_store.js';
import type { SenderAddressBookStore } from '../storage/tagging_store/sender_address_book_store.js';
import type { SenderTaggingStore } from '../storage/tagging_store/sender_tagging_store.js';
/** Options for ContractFunctionSimulator.run. */
export type ContractSimulatorRunOpts = {
    /** The address of the contract (should match request.origin). */
    contractAddress: AztecAddress;
    /** The function selector of the entry point. */
    selector: FunctionSelector;
    /** The address calling the function. Can be replaced to simulate a call from another contract or account. */
    msgSender?: AztecAddress;
    /** The block header to use as base state for this run. */
    anchorBlockHeader: BlockHeader;
    /** The address used as a tagging sender when emitting private logs. */
    senderForTags?: AztecAddress;
    /** The accounts whose notes we can access in this call. */
    scopes: AccessScopes;
    /** The job ID for staged writes. */
    jobId: string;
};
/** Args for ContractFunctionSimulator constructor. */
export type ContractFunctionSimulatorArgs = {
    contractStore: ContractStore;
    noteStore: NoteStore;
    keyStore: KeyStore;
    addressStore: AddressStore;
    aztecNode: AztecNode;
    senderTaggingStore: SenderTaggingStore;
    recipientTaggingStore: RecipientTaggingStore;
    senderAddressBookStore: SenderAddressBookStore;
    capsuleStore: CapsuleStore;
    privateEventStore: PrivateEventStore;
    simulator: CircuitSimulator;
    contractSyncService: ContractSyncService;
};
/**
 * The contract function simulator.
 */
export declare class ContractFunctionSimulator {
    private readonly log;
    private readonly contractStore;
    private readonly noteStore;
    private readonly keyStore;
    private readonly addressStore;
    private readonly aztecNode;
    private readonly senderTaggingStore;
    private readonly recipientTaggingStore;
    private readonly senderAddressBookStore;
    private readonly capsuleStore;
    private readonly privateEventStore;
    private readonly simulator;
    private readonly contractSyncService;
    constructor(args: ContractFunctionSimulatorArgs);
    /**
     * Runs a private function.
     * @param request - The transaction request.
     */
    run(request: TxExecutionRequest, { contractAddress, selector, msgSender, anchorBlockHeader, senderForTags, scopes, jobId }: ContractSimulatorRunOpts): Promise<PrivateExecutionResult>;
    /**
     * Runs a utility function.
     * @param call - The function call to execute.
     * @param authwits - Authentication witnesses required for the function call.
     * @param anchorBlockHeader - The block header to use as base state for this run.
     * @param scopes - Optional array of account addresses whose notes can be accessed in this call. Defaults to all
     * accounts if not specified.
     * @returns A return value of the utility function in a form as returned by the simulator (Noir fields)
     */
    runUtility(call: FunctionCall, authwits: AuthWitness[], anchorBlockHeader: BlockHeader, scopes: AccessScopes, jobId: string): Promise<Fr[]>;
    /**
     * Returns the execution statistics collected during the simulator run.
     * @returns The execution statistics.
     */
    getStats(): {
        nodeRPCCalls: import("@aztec/stdlib/tx").NodeStats;
    };
}
/**
 * Generates the final public inputs of the tail kernel circuit, an empty Chonk proof
 * and the execution steps for a `PrivateExecutionResult` as if it had been
 * processed by the private kernel prover. This skips many of the checks performed by the kernels
 * (allowing state overrides) and is much faster, while still generating a valid
 * output that can be sent to the node for public simulation
 * @param privateExecutionResult - The result of the private execution.
 * @param debugFunctionNameGetter - A provider for contract data in order to get function names and debug info.
 * @param node - AztecNode for verifying settled read requests against the note hash and nullifier trees.
 * @param minRevertibleSideEffectCounterOverride - Optional override for the min revertible side effect counter.
 * Used by TXE to simulate account contract behavior (setting the counter before app execution).
 * @returns The simulated proving result.
 */
export declare function generateSimulatedProvingResult(privateExecutionResult: PrivateExecutionResult, debugFunctionNameGetter: (contractAddress: AztecAddress, functionSelector: FunctionSelector) => Promise<string>, node: AztecNode, minRevertibleSideEffectCounterOverride?: number): Promise<PrivateKernelExecutionProofOutput<PrivateKernelTailCircuitPublicInputs>>;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udHJhY3RfZnVuY3Rpb25fc2ltdWxhdG9yLmQudHMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvY29udHJhY3RfZnVuY3Rpb25fc2ltdWxhdG9yL2NvbnRyYWN0X2Z1bmN0aW9uX3NpbXVsYXRvci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUF1QkEsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBR3BELE9BQU8sS0FBSyxFQUFFLFFBQVEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBR2pELE9BQU8sRUFDTCxLQUFLLGdCQUFnQixFQU90QixNQUFNLHlCQUF5QixDQUFDO0FBQ2pDLE9BQU8sS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ3RELE9BQU8sRUFBRSxnQkFBZ0IsRUFBZ0IsTUFBTSxtQkFBbUIsQ0FBQztBQUNuRSxPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFXM0QsT0FBTyxLQUFLLEVBQUUsU0FBUyxFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDakUsT0FBTyxFQUtMLEtBQUssaUNBQWlDLEVBQ3RDLG9DQUFvQyxFQWFyQyxNQUFNLHNCQUFzQixDQUFDO0FBSTlCLE9BQU8sRUFDTCxXQUFXLEVBR1gsc0JBQXNCLEVBRXRCLGtCQUFrQixFQUluQixNQUFNLGtCQUFrQixDQUFDO0FBRTFCLE9BQU8sS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ3hELE9BQU8sS0FBSyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDckYsT0FBTyxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDOUUsT0FBTyxLQUFLLEVBQUUsWUFBWSxFQUFFLE1BQU0sMkNBQTJDLENBQUM7QUFDOUUsT0FBTyxLQUFLLEVBQUUs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