/**
 * Vendored pg-compatible Pool/Client wrapper for PGlite.
 *
 * Copied from @middle-management/pglite-pg-adapter v0.0.3
 * https://www.npmjs.com/package/@middle-management/pglite-pg-adapter
 *
 * Modifications:
 * - Converted to ESM and TypeScript
 * - Uses PGliteInterface instead of PGlite class to avoid TypeScript
 *   type mismatches from ESM/CJS dual package resolution with private fields
 * - Simplified rowCount calculation to handle CTEs properly
 */
import type { PGliteInterface } from '@electric-sql/pglite';
import { EventEmitter } from 'events';
import type { QueryResult, QueryResultRow } from 'pg';
import { Readable, Writable } from 'stream';
export interface PoolConfig {
    pglite: PGliteInterface;
    max?: number;
    min?: number;
}
interface ClientConfig {
    pglite: PGliteInterface;
    host?: string;
    port?: number;
    ssl?: boolean;
}
export declare class Client extends EventEmitter {
    protected pglite: PGliteInterface;
    protected _connected: boolean;
    readonly host: string;
    readonly port: number;
    readonly ssl: boolean;
    readonly connection: object;
    readonly copyFrom: () => Writable;
    readonly copyTo: () => Readable;
    readonly pauseDrain: () => void;
    readonly resumeDrain: () => void;
    readonly escapeLiteral: (str: string) => string;
    readonly escapeIdentifier: (str: string) => string;
    readonly setTypeParser: () => void;
    readonly getTypeParser: () => (value: string) => unknown;
    constructor(config: ClientConfig);
    connect(): Promise<void>;
    end(): Promise<void>;
    query<R extends QueryResultRow = any>(text: string, values?: any[]): Promise<QueryResult<R>>;
    protected convertPGliteResult<R extends QueryResultRow>(result: {
        rows: R[];
        fields: Array<{
            name: string;
            dataTypeID: number;
        }>;
        affectedRows?: number;
    }): QueryResult<R>;
    get connected(): boolean;
}
export declare class Pool extends EventEmitter {
    private clients;
    private availableClients;
    private waitingQueue;
    private _ended;
    private pglite;
    private _config;
    readonly expiredCount = 0;
    readonly options: PoolConfig;
    constructor(config: PoolConfig);
    get totalCount(): number;
    get idleCount(): number;
    get waitingCount(): number;
    get ending(): boolean;
    get ended(): boolean;
    connect(): Promise<PoolClient>;
    query<R extends QueryResultRow = any>(text: string, values?: any[]): Promise<QueryResult<R>>;
    releaseClient(client: PoolClient): void;
    end(): Promise<void>;
}
export declare class PoolClient extends Client {
    private pool;
    private _released;
    private _inUse;
    private _userReleased;
    constructor(pglite: PGliteInterface, pool: Pool);
    query<R extends QueryResultRow = any>(text: string, values?: any[]): Promise<QueryResult<R>>;
    release(): void;
    end(): Promise<void>;
    _markInUse(): void;
    _markAvailable(): void;
    _markReleased(): void;
    get connected(): boolean;
}
export {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGdsaXRlX3Bvb2wuZC50cyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy90ZXN0L3BnbGl0ZV9wb29sLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7Ozs7OztHQVdHO0FBQ0gsT0FBTyxLQUFLLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDNUQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLFFBQVEsQ0FBQztBQUN0QyxPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsY0FBYyxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBQ3RELE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLE1BQU0sUUFBUSxDQUFDO0FBRTVDLE1BQU0sV0FBVyxVQUFVO0lBQ3pCLE1BQU0sRUFBRSxlQUFlLENBQUM7SUFDeEIsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQ2IsR0FBRyxDQUFDLEVBQUUsTUFBTSxDQUFDO0NBQ2Q7QUFFRCxVQUFVLFlBQVk7SUFDcEIsTUFBTSxFQUFFLGVBQWUsQ0FBQztJQUN4QixJQUFJLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDZCxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDZCxHQUFHLENBQUMsRUFBRSxPQUFPLENBQUM7Q0FDZjtBQUVELHFCQUFhLE1BQU8sU0FBUSxZQUFZO0lBQ3RDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsZUFBZSxDQUFDO0lBQ2xDLFNBQVMsQ0FBQyxVQUFVLFVBQVM7SUFDN0IsUUFBUSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUM7SUFDdEIsUUFBUSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUM7SUFDdEIsUUFBUSxDQUFDLEdBQUcsRUFBRSxPQUFPLENBQUM7SUFDdEIsUUFBUSxDQUFDLFVBQVUsRUFBRSxNQUFNLENBQUM7SUFHNUIsUUFBUSxDQUFDLFFBQVEsaUJBQWtDO0lBQ25ELFFBQVEsQ0FBQyxNQUFNLGlCQUFrQztJQUNqRCxRQUFRLENBQUMsVUFBVSxhQUFr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