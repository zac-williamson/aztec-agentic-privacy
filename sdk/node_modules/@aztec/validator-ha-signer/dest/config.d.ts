import type { L1ContractAddresses } from '@aztec/ethereum/l1-contract-addresses';
import { type ConfigMappingsType } from '@aztec/foundation/config';
import { EthAddress } from '@aztec/foundation/eth-address';
import { z } from 'zod';
/**
 * Configuration for the Validator HA Signer
 *
 * This config is used for distributed locking and slashing protection
 * when running multiple validator nodes in a high-availability setup.
 */
export interface ValidatorHASignerConfig {
    /** Whether HA signing / slashing protection is enabled */
    haSigningEnabled: boolean;
    /** L1 contract addresses (rollup address required) */
    l1Contracts: Pick<L1ContractAddresses, 'rollupAddress'>;
    /** Unique identifier for this node */
    nodeId: string;
    /** How long to wait between polls when a duty is being signed (ms) */
    pollingIntervalMs: number;
    /** Maximum time to wait for a duty being signed to complete (ms) */
    signingTimeoutMs: number;
    /** Maximum age of a stuck duty in ms (defaults to 2x hardcoded Aztec slot duration if not set) */
    maxStuckDutiesAgeMs?: number;
    /** Optional: clean up old duties after this many hours (disabled if not set) */
    cleanupOldDutiesAfterHours?: number;
    /**
     * PostgreSQL connection string
     * Format: postgresql://user:password@host:port/database
     */
    databaseUrl?: string;
    /**
     * PostgreSQL connection pool configuration
     */
    /** Maximum number of clients in the pool (default: 10) */
    poolMaxCount?: number;
    /** Minimum number of clients in the pool (default: 0) */
    poolMinCount?: number;
    /** Idle timeout in milliseconds (default: 10000) */
    poolIdleTimeoutMs?: number;
    /** Connection timeout in milliseconds (default: 0, no timeout) */
    poolConnectionTimeoutMs?: number;
}
export declare const validatorHASignerConfigMappings: ConfigMappingsType<ValidatorHASignerConfig>;
export declare const defaultValidatorHASignerConfig: ValidatorHASignerConfig;
/**
 * Returns the validator HA signer configuration from environment variables.
 * Note: If an environment variable is not set, the default value is used.
 * @returns The validator HA signer configuration.
 */
export declare function getConfigEnvVars(): ValidatorHASignerConfig;
export declare const ValidatorHASignerConfigSchema: z.ZodObject<{
    haSigningEnabled: z.ZodBoolean;
    l1Contracts: z.ZodObject<{
        rollupAddress: z.ZodType<EthAddress, z.ZodTypeDef, EthAddress>;
    }, "strip", z.ZodTypeAny, {
        rollupAddress: EthAddress;
    }, {
        rollupAddress: EthAddress;
    }>;
    nodeId: z.ZodString;
    pollingIntervalMs: z.ZodNumber;
    signingTimeoutMs: z.ZodNumber;
    maxStuckDutiesAgeMs: z.ZodOptional<z.ZodNumber>;
    cleanupOldDutiesAfterHours: z.ZodOptional<z.ZodNumber>;
    databaseUrl: z.ZodOptional<z.ZodString>;
    poolMaxCount: z.ZodOptional<z.ZodNumber>;
    poolMinCount: z.ZodOptional<z.ZodNumber>;
    poolIdleTimeoutMs: z.ZodOptional<z.ZodNumber>;
    poolConnectionTimeoutMs: z.ZodOptional<z.ZodNumber>;
}, "strip", z.ZodTypeAny, {
    haSigningEnabled: boolean;
    l1Contracts: {
        rollupAddress: EthAddress;
    };
    nodeId: string;
    pollingIntervalMs: number;
    signingTimeoutMs: number;
    maxStuckDutiesAgeMs?: number | undefined;
    cleanupOldDutiesAfterHours?: number | undefined;
    databaseUrl?: string | undefined;
    poolMaxCount?: number | undefined;
    poolMinCount?: number | undefined;
    poolIdleTimeoutMs?: number | undefined;
    poolConnectionTimeoutMs?: number | undefined;
}, {
    haSigningEnabled: boolean;
    l1Contracts: {
        rollupAddress: EthAddress;
    };
    nodeId: string;
    pollingIntervalMs: number;
    signingTimeoutMs: number;
    maxStuckDutiesAgeMs?: number | undefined;
    cleanupOldDutiesAfterHours?: number | undefined;
    databaseUrl?: string | undefined;
    poolMaxCount?: number | undefined;
    poolMinCount?: number | undefined;
    poolIdleTimeoutMs?: number | undefined;
    poolConnectionTimeoutMs?: number | undefined;
}>;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlnLmQudHMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvY29uZmlnLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sS0FBSyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFDakYsT0FBTyxFQUNMLEtBQUssa0JBQWtCLEVBTXhCLE1BQU0sMEJBQTBCLENBQUM7QUFDbEMsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBRzNELE9BQU8sRUFBRSxDQUFDLEVBQUUsTUFBTSxLQUFLLENBQUM7QUFFeEI7Ozs7O0dBS0c7QUFDSCxNQUFNLFdBQVcsdUJBQXVCO0lBQ3RDLDBEQUEwRDtJQUMxRCxnQkFBZ0IsRUFBRSxPQUFPLENBQUM7SUFDMUIsc0RBQXNEO0lBQ3RELFdBQVcsRUFBRSxJQUFJLENBQUMsbUJBQW1CLEVBQUUsZUFBZSxDQUFDLENBQUM7SUFDeEQsc0NBQXNDO0lBQ3RDLE1BQU0sRUFBRSxNQUFNLENBQUM7SUFDZixzRUFBc0U7SUFDdEUsaUJBQWlCLEVBQUUsTUFBTSxDQUFDO0lBQzFCLG9FQUFvRTtJQUNwRSxnQkFBZ0IsRUFBRSxNQUFNLENBQUM7SUFDekIsa0dBQWtHO0lBQ2xHLG1CQUFtQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzdCLGdGQUFnRjtJQUNoRiwwQkFBMEIsQ0FBQyxFQUFFLE1BQU0sQ0FBQztJQUNwQzs7O09BR0c7SUFDSCxXQUFXLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDckI7O09BRUc7SUFDSCwwREFBMEQ7SUFDMUQsWUFBWSxDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQ3RCLHlEQUF5RDtJQUN6RCxZQUFZLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDdEIsb0RBQW9EO0lBQ3BELGlCQUFpQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzNCLGtFQUFrRTtJQUNsRSx1QkFBdUIsQ0FBQyxFQUFFLE1BQU0sQ0FBQztDQUNsQztBQUVELGVBQU8sTUFBTSwrQkFBK0IsRUFBRSxrQkFBa0IsQ0FBQyx1QkFBdUIsQ0FpRXZGLENBQUM7QUFFRixlQUFPLE1BQU0sOEJBQThCLEVBQUUsdUJBRTVDLENBQUM7QUFFRjs7OztHQUlHO0FBQ0gsd0JBQWdCLGdCQUFnQixJQUFJLHVCQUF1QixDQUUxRDtBQUVELGVBQU8sTUFBTSw2QkFBNkI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFlRSxDQUFDIn0=