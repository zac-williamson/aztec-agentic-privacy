import type { ExtendedViemWalletClient, ViemContract } from '@aztec/ethereum/types';
import type { EpochNumber } from '@aztec/foundation/branded-types';
import { Fr } from '@aztec/foundation/curves/bn254';
import { EthAddress } from '@aztec/foundation/eth-address';
import type { Logger } from '@aztec/foundation/log';
import type { SiblingPath } from '@aztec/foundation/trees';
import { TokenPortalAbi } from '@aztec/l1-artifacts/TokenPortalAbi';
import type { AztecAddress } from '@aztec/stdlib/aztec-address';
import type { AztecNode } from '@aztec/stdlib/interfaces/client';
import { type Hex } from 'viem';
/** L1 to L2 message info to claim it on L2. */
export type L2Claim = {
    /** Secret for claiming. */
    claimSecret: Fr;
    /** Hash of the secret for claiming. */
    claimSecretHash: Fr;
    /** Hash of the message. */
    messageHash: Hex;
    /** Leaf index in the L1 to L2 message tree. */
    messageLeafIndex: bigint;
};
/** L1 to L2 message info that corresponds to an amount to claim. */
export type L2AmountClaim = L2Claim & {
    claimAmount: bigint;
};
/** L1 to L2 message info that corresponds to an amount to claim with associated recipient. */
export type L2AmountClaimWithRecipient = L2AmountClaim & {
    /** Address that will receive the newly minted notes. */ recipient: AztecAddress;
};
/** Generates a pair secret and secret hash */
export declare function generateClaimSecret(logger?: Logger): Promise<[Fr, Fr]>;
/** Helper for managing an ERC20 on L1. */
export declare class L1TokenManager {
    /** Address of the ERC20 contract. */
    readonly tokenAddress: EthAddress;
    /** Address of the handler/faucet contract. */
    readonly handlerAddress: EthAddress | undefined;
    private readonly extendedClient;
    private logger;
    private contract;
    private handler;
    constructor(
    /** Address of the ERC20 contract. */
    tokenAddress: EthAddress, 
    /** Address of the handler/faucet contract. */
    handlerAddress: EthAddress | undefined, extendedClient: ExtendedViemWalletClient, logger: Logger);
    /** Returns the amount of tokens available to mint via the handler.
     * @throws if the handler is not provided.
     */
    getMintAmount(): Promise<bigint>;
    /**
     * Returns the balance of the given address.
     * @param address - Address to get the balance of.
     */
    getL1TokenBalance(address: Hex): Promise<bigint>;
    /**
     * Mints a fixed amount of tokens for the given address. Returns once the tx has been mined.
     * @param address - Address to mint the tokens for.
     * @param addressName - Optional name of the address for logging.
     */
    mint(address: Hex, addressName?: string): Promise<void>;
    /**
     * Approves tokens for the given address. Returns once the tx has been mined.
     * @param amount - Amount to approve.
     * @param address - Address to approve the tokens for.
     * @param addressName - Optional name of the address for logging.
     */
    approve(amount: bigint, address: Hex, addressName?: string): Promise<void>;
}
/** Helper for interacting with the FeeJuicePortal on L1. */
export declare class L1FeeJuicePortalManager {
    private readonly extendedClient;
    private readonly logger;
    private readonly tokenManager;
    private readonly contract;
    constructor(portalAddress: EthAddress, tokenAddress: EthAddress, handlerAddress: EthAddress | undefined, extendedClient: ExtendedViemWalletClient, logger: Logger);
    /** Returns the associated token manager for the L1 ERC20. */
    getTokenManager(): L1TokenManager;
    /**
     * Bridges fee juice from L1 to L2 publicly. Handles L1 ERC20 approvals. Returns once the tx has been mined.
     * @param to - Address to send the tokens to on L2.
     * @param amount - Amount of tokens to send.
     * @param mint - Whether to mint the tokens before sending (only during testing).
     */
    bridgeTokensPublic(to: AztecAddress, amount: bigint | undefined, mint?: boolean): Promise<L2AmountClaim>;
    /**
     * Creates a new instance
     * @param node - Aztec node client used for retrieving the L1 contract addresses.
     * @param extendedClient - Wallet client, extended with public actions.
     * @param logger - Logger.
     */
    static new(node: AztecNode, extendedClient: ExtendedViemWalletClient, logger: Logger): Promise<L1FeeJuicePortalManager>;
}
/** Helper for interacting with a test TokenPortal on L1 for sending tokens to L2. */
export declare class L1ToL2TokenPortalManager {
    protected extendedClient: ExtendedViemWalletClient;
    protected logger: Logger;
    protected readonly portal: ViemContract<typeof TokenPortalAbi>;
    protected readonly tokenManager: L1TokenManager;
    constructor(portalAddress: EthAddress, tokenAddress: EthAddress, handlerAddress: EthAddress | undefined, extendedClient: ExtendedViemWalletClient, logger: Logger);
    /** Returns the token manager for the underlying L1 token. */
    getTokenManager(): L1TokenManager;
    /**
     * Bridges tokens from L1 to L2. Handles token approvals. Returns once the tx has been mined.
     * @param to - Address to send the tokens to on L2.
     * @param amount - Amount of tokens to send.
     * @param mint - Whether to mint the tokens before sending (only during testing).
     */
    bridgeTokensPublic(to: AztecAddress, amount: bigint, mint?: boolean): Promise<L2AmountClaim>;
    /**
     * Bridges tokens from L1 to L2 privately. Handles token approvals. Returns once the tx has been mined.
     * @param to - Address to send the tokens to on L2.
     * @param amount - Amount of tokens to send.
     * @param mint - Whether to mint the tokens before sending (only during testing).
     */
    bridgeTokensPrivate(to: AztecAddress, amount: bigint, mint?: boolean): Promise<L2AmountClaimWithRecipient>;
    private bridgeSetup;
}
/** Helper for interacting with a test TokenPortal on L1 for both withdrawing from and bridging to L2. */
export declare class L1TokenPortalManager extends L1ToL2TokenPortalManager {
    private readonly outbox;
    constructor(portalAddress: EthAddress, tokenAddress: EthAddress, handlerAddress: EthAddress | undefined, outboxAddress: EthAddress, extendedClient: ExtendedViemWalletClient, logger: Logger);
    /**
     * Withdraws funds from the portal by consuming an L2 to L1 message. Returns once the tx is mined on L1.
     * @param amount - Amount to withdraw.
     * @param recipient - Who will receive the funds.
     * @param epochNumber - Epoch number of the message.
     * @param messageIndex - Index of the message.
     * @param siblingPath - Sibling path of the message.
     */
    withdrawFunds(amount: bigint, recipient: EthAddress, epochNumber: EpochNumber, messageIndex: bigint, siblingPath: SiblingPath<number>): Promise<void>;
    /**
     * Computes the L2 to L1 message leaf for the given parameters.
     * @param amount - Amount to bridge.
     * @param recipient - Recipient on L1.
     * @param l2Bridge - Address of the L2 bridge.
     * @param callerOnL1 - Caller address on L1.
     */
    getL2ToL1MessageLeaf(amount: bigint, recipient: EthAddress, l2Bridge: AztecAddress, callerOnL1?: EthAddress): Promise<Fr>;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG9ydGFsX21hbmFnZXIuZC50cyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9ldGhlcmV1bS9wb3J0YWxfbWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSx3QkFBd0IsRUFBRSxZQUFZLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUVwRixPQUFPLEtBQUssRUFBRSxXQUFXLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUVuRSxPQUFPLEVBQUUsRUFBRSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDcEQsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBQzNELE9BQU8sS0FBSyxFQUFFLE1BQU0sRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3BELE9BQU8sS0FBSyxFQUFFLFdBQVcsRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBSzNELE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUNwRSxPQUFPLEtBQUssRUFBRSxZQUFZLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUVoRSxPQUFPLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUdqRSxPQUFPLEVBQUUsS0FBSyxHQUFHLEVBQW1DLE1BQU0sTUFBTSxDQUFDO0FBRWpFLCtDQUErQztBQUMvQyxNQUFNLE1BQU0sT0FBTyxHQUFHO0lBQ3BCLDJCQUEyQjtJQUMzQixXQUFXLEVBQUUsRUFBRSxDQUFDO0lBQ2hCLHVDQUF1QztJQUN2QyxlQUFlLEVBQUUsRUFBRSxDQUFDO0lBQ3BCLDJCQUEyQjtJQUMzQixXQUFXLEVBQUUsR0FBRyxDQUFDO0lBQ2pCLCtDQUErQztJQUMvQyxnQkFBZ0IsRUFBRSxNQUFNLENBQUM7Q0FDMUIsQ0FBQztBQUVGLG9FQUFvRTtBQUNwRSxNQUFNLE1BQU0sYUFBYSxHQUFHLE9BQU8sR0FBRztJQUF5QixXQUFXLEVBQUUsTUFBTSxDQUFBO0NBQUUsQ0FBQztB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