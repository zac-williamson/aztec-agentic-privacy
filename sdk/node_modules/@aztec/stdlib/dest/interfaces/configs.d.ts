import type { EthAddress } from '@aztec/foundation/eth-address';
import type { Prettify } from '@aztec/foundation/types';
import { z } from 'zod';
import type { AztecAddress } from '../aztec-address/index.js';
import { type AllowedElement } from './allowed_element.js';
/** Sequencer configuration */
export interface SequencerConfig {
    /** The number of ms to wait between polling for pending txs. */
    sequencerPollingIntervalMS?: number;
    /** The maximum number of txs to include in a block. */
    maxTxsPerBlock?: number;
    /** The minimum number of txs to include in a block. */
    minTxsPerBlock?: number;
    /** The minimum number of valid txs (after execution) to include in a block. If not set, falls back to minTxsPerBlock. */
    minValidTxsPerBlock?: number;
    /** Whether to publish txs with the block proposals */
    publishTxsWithProposals?: boolean;
    /** The maximum L2 block gas. */
    maxL2BlockGas?: number;
    /** The maximum DA block gas. */
    maxDABlockGas?: number;
    /** Recipient of block reward. */
    coinbase?: EthAddress;
    /** Address to receive fees. */
    feeRecipient?: AztecAddress;
    /** The working directory to use for simulation/proving */
    acvmWorkingDirectory?: string;
    /** The path to the ACVM binary */
    acvmBinaryPath?: string;
    /** The list of functions calls allowed to run in setup */
    txPublicSetupAllowList?: AllowedElement[];
    /** Max block size */
    maxBlockSizeInBytes?: number;
    /** Payload address to vote for */
    governanceProposerPayload?: EthAddress;
    /** Whether to enforce the time table when building blocks */
    enforceTimeTable?: boolean;
    /** How much time (in seconds) we allow in the slot for publishing the L1 tx. */
    l1PublishingTime?: number;
    /** Used for testing to introduce a fake delay after processing each tx */
    fakeProcessingDelayPerTxMs?: number;
    /** Used for testing to throw an error after processing N txs */
    fakeThrowAfterProcessingTxCount?: number;
    /** How many seconds it takes for proposals and attestations to travel across the p2p layer (one-way) */
    attestationPropagationTime?: number;
    /** How many seconds before invalidating a block as a committee member (zero to never invalidate) */
    secondsBeforeInvalidatingBlockAsCommitteeMember?: number;
    /** How many seconds before invalidating a block as a non-committee member (zero to never invalidate) */
    secondsBeforeInvalidatingBlockAsNonCommitteeMember?: number;
    /** Skip collecting attestations (for testing only) */
    skipCollectingAttestations?: boolean;
    /** Do not invalidate the previous block if invalid when we are the proposer (for testing only) */
    skipInvalidateBlockAsProposer?: boolean;
    /** Broadcast invalid block proposals with corrupted state (for testing only) */
    broadcastInvalidBlockProposal?: boolean;
    /** Inject a fake attestation (for testing only) */
    injectFakeAttestation?: boolean;
    /** Whether to run in fisherman mode: builds blocks on every slot for validation without publishing */
    fishermanMode?: boolean;
    /** Shuffle attestation ordering to create invalid ordering (for testing only) */
    shuffleAttestationOrdering?: boolean;
    /** Duration per block in milliseconds when building multiple blocks per slot (default: undefined = single block per slot) */
    blockDurationMs?: number;
    /** Have sequencer build and publish an empty checkpoint if there are no txs */
    buildCheckpointIfEmpty?: boolean;
    /** Skip pushing proposed blocks to archiver (default: false) */
    skipPushProposedBlocksToArchiver?: boolean;
    /** Minimum number of blocks required for a checkpoint proposal (test only, defaults to undefined = no minimum) */
    minBlocksForCheckpoint?: number;
    /** Skip publishing checkpoint proposals probability (for testing checkpoint prunes only) */
    skipPublishingCheckpointsPercent?: number;
}
export declare const SequencerConfigSchema: z.ZodObject<{
    sequencerPollingIntervalMS: z.ZodOptional<z.ZodNumber>;
    maxTxsPerBlock: z.ZodOptional<z.ZodNumber>;
    minValidTxsPerBlock: z.ZodOptional<z.ZodNumber>;
    minTxsPerBlock: z.ZodOptional<z.ZodNumber>;
    maxL2BlockGas: z.ZodOptional<z.ZodNumber>;
    publishTxsWithProposals: z.ZodOptional<z.ZodBoolean>;
    maxDABlockGas: z.ZodOptional<z.ZodNumber>;
    coinbase: z.ZodOptional<import("../schemas/index.js").ZodFor<EthAddress>>;
    feeRecipient: z.ZodOptional<import("../schemas/index.js").ZodFor<AztecAddress>>;
    acvmWorkingDirectory: z.ZodOptional<z.ZodString>;
    acvmBinaryPath: z.ZodOptional<z.ZodString>;
    txPublicSetupAllowList: z.ZodOptional<z.ZodArray<z.ZodUnion<[z.ZodObject<{
        address: import("../schemas/index.js").ZodFor<AztecAddress>;
        selector: import("../schemas/index.js").ZodFor<import("../abi/function_selector.js").FunctionSelector>;
    }, "strip", z.ZodTypeAny, {
        address: AztecAddress;
        selector: import("../abi/function_selector.js").FunctionSelector;
    }, {
        address?: any;
        selector?: any;
    }>, z.ZodObject<{
        address: import("../schemas/index.js").ZodFor<AztecAddress>;
    }, "strip", z.ZodTypeAny, {
        address: AztecAddress;
    }, {
        address?: any;
    }>, z.ZodObject<{
        classId: import("../schemas/index.js").ZodFor<import("@aztec/foundation/schemas").Fr>;
        selector: import("../schemas/index.js").ZodFor<import("../abi/function_selector.js").FunctionSelector>;
    }, "strip", z.ZodTypeAny, {
        classId: import("@aztec/foundation/schemas").Fr;
        selector: import("../abi/function_selector.js").FunctionSelector;
    }, {
        classId?: any;
        selector?: any;
    }>, z.ZodObject<{
        classId: import("../schemas/index.js").ZodFor<import("@aztec/foundation/schemas").Fr>;
    }, "strip", z.ZodTypeAny, {
        classId: import("@aztec/foundation/schemas").Fr;
    }, {
        classId?: any;
    }>]>, "many">>;
    maxBlockSizeInBytes: z.ZodOptional<z.ZodNumber>;
    governanceProposerPayload: z.ZodOptional<import("../schemas/index.js").ZodFor<EthAddress>>;
    l1PublishingTime: z.ZodOptional<z.ZodNumber>;
    enforceTimeTable: z.ZodOptional<z.ZodBoolean>;
    fakeProcessingDelayPerTxMs: z.ZodOptional<z.ZodNumber>;
    fakeThrowAfterProcessingTxCount: z.ZodOptional<z.ZodNumber>;
    attestationPropagationTime: z.ZodOptional<z.ZodNumber>;
    skipCollectingAttestations: z.ZodOptional<z.ZodBoolean>;
    skipInvalidateBlockAsProposer: z.ZodOptional<z.ZodBoolean>;
    secondsBeforeInvalidatingBlockAsCommitteeMember: z.ZodNumber;
    secondsBeforeInvalidatingBlockAsNonCommitteeMember: z.ZodNumber;
    broadcastInvalidBlockProposal: z.ZodOptional<z.ZodBoolean>;
    injectFakeAttestation: z.ZodOptional<z.ZodBoolean>;
    fishermanMode: z.ZodOptional<z.ZodBoolean>;
    shuffleAttestationOrdering: z.ZodOptional<z.ZodBoolean>;
    blockDurationMs: z.ZodOptional<z.ZodNumber>;
    buildCheckpointIfEmpty: z.ZodOptional<z.ZodBoolean>;
    skipPushProposedBlocksToArchiver: z.ZodOptional<z.ZodBoolean>;
    minBlocksForCheckpoint: z.ZodOptional<z.ZodNumber>;
    skipPublishingCheckpointsPercent: z.ZodOptional<z.ZodNumber>;
}, "strip", z.ZodTypeAny, {
    sequencerPollingIntervalMS?: number | undefined;
    maxTxsPerBlock?: number | undefined;
    minValidTxsPerBlock?: number | undefined;
    minTxsPerBlock?: number | undefined;
    maxL2BlockGas?: number | undefined;
    publishTxsWithProposals?: boolean | undefined;
    maxDABlockGas?: number | undefined;
    coinbase?: EthAddress | undefined;
    feeRecipient?: AztecAddress | undefined;
    acvmWorkingDirectory?: string | undefined;
    acvmBinaryPath?: string | undefined;
    txPublicSetupAllowList?: ({
        address: AztecAddress;
        selector: import("../abi/function_selector.js").FunctionSelector;
    } | {
        address: AztecAddress;
    } | {
        classId: import("@aztec/foundation/schemas").Fr;
        selector: import("../abi/function_selector.js").FunctionSelector;
    } | {
        classId: import("@aztec/foundation/schemas").Fr;
    })[] | undefined;
    maxBlockSizeInBytes?: number | undefined;
    governanceProposerPayload?: EthAddress | undefined;
    l1PublishingTime?: number | undefined;
    enforceTimeTable?: boolean | undefined;
    fakeProcessingDelayPerTxMs?: number | undefined;
    fakeThrowAfterProcessingTxCount?: number | undefined;
    attestationPropagationTime?: number | undefined;
    skipCollectingAttestations?: boolean | undefined;
    skipInvalidateBlockAsProposer?: boolean | undefined;
    secondsBeforeInvalidatingBlockAsCommitteeMember: number;
    secondsBeforeInvalidatingBlockAsNonCommitteeMember: number;
    broadcastInvalidBlockProposal?: boolean | undefined;
    injectFakeAttestation?: boolean | undefined;
    fishermanMode?: boolean | undefined;
    shuffleAttestationOrdering?: boolean | undefined;
    blockDurationMs?: number | undefined;
    buildCheckpointIfEmpty?: boolean | undefined;
    skipPushProposedBlocksToArchiver?: boolean | undefined;
    minBlocksForCheckpoint?: number | undefined;
    skipPublishingCheckpointsPercent?: number | undefined;
}, {
    sequencerPollingIntervalMS?: number | undefined;
    maxTxsPerBlock?: number | undefined;
    minValidTxsPerBlock?: number | undefined;
    minTxsPerBlock?: number | undefined;
    maxL2BlockGas?: number | undefined;
    publishTxsWithProposals?: boolean | undefined;
    maxDABlockGas?: number | undefined;
    coinbase?: any;
    feeRecipient?: any;
    acvmWorkingDirectory?: string | undefined;
    acvmBinaryPath?: string | undefined;
    txPublicSetupAllowList?: ({
        address?: any;
        selector?: any;
    } | {
        address?: any;
    } | {
        classId?: any;
        selector?: any;
    } | {
        classId?: any;
    })[] | undefined;
    maxBlockSizeInBytes?: number | undefined;
    governanceProposerPayload?: any;
    l1PublishingTime?: number | undefined;
    enforceTimeTable?: boolean | undefined;
    fakeProcessingDelayPerTxMs?: number | undefined;
    fakeThrowAfterProcessingTxCount?: number | undefined;
    attestationPropagationTime?: number | undefined;
    skipCollectingAttestations?: boolean | undefined;
    skipInvalidateBlockAsProposer?: boolean | undefined;
    secondsBeforeInvalidatingBlockAsCommitteeMember: number;
    secondsBeforeInvalidatingBlockAsNonCommitteeMember: number;
    broadcastInvalidBlockProposal?: boolean | undefined;
    injectFakeAttestation?: boolean | undefined;
    fishermanMode?: boolean | undefined;
    shuffleAttestationOrdering?: boolean | undefined;
    blockDurationMs?: number | undefined;
    buildCheckpointIfEmpty?: boolean | undefined;
    skipPushProposedBlocksToArchiver?: boolean | undefined;
    minBlocksForCheckpoint?: number | undefined;
    skipPublishingCheckpointsPercent?: number | undefined;
}>;
type SequencerConfigOptionalKeys = 'governanceProposerPayload' | 'blockDurationMs' | 'coinbase' | 'feeRecipient' | 'acvmWorkingDirectory' | 'acvmBinaryPath' | 'fakeProcessingDelayPerTxMs' | 'fakeThrowAfterProcessingTxCount' | 'l1PublishingTime' | 'txPublicSetupAllowList' | 'minValidTxsPerBlock' | 'minBlocksForCheckpoint';
export type ResolvedSequencerConfig = Prettify<Required<Omit<SequencerConfig, SequencerConfigOptionalKeys>> & Pick<SequencerConfig, SequencerConfigOptionalKeys>>;
export {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29uZmlncy5kLnRzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL2ludGVyZmFjZXMvY29uZmlncy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEtBQUssRUFBRSxVQUFVLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUNoRSxPQUFPLEtBQUssRUFBRSxRQUFRLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUV4RCxPQUFPLEVBQUUsQ0FBQyxFQUFFLE1BQU0sS0FBSyxDQUFDO0FBRXhCLE9BQU8sS0FBSyxFQUFFLFlBQVksRUFBRSxNQUFNLDJCQUEyQixDQUFDO0FBRTlELE9BQU8sRUFBRSxLQUFLLGNBQWMsRUFBd0IsTUFBTSxzQkFBc0IsQ0FBQztBQUVqRiw4QkFBOEI7QUFDOUIsTUFBTSxXQUFXLGVBQWU7SUFDOUIsZ0VBQWdFO0lBQ2hFLDBCQUEwQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQ3BDLHVEQUF1RDtJQUN2RCxjQUFjLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDeEIsdURBQXVEO0lBQ3ZELGNBQWMsQ0FBQyxFQUFFLE1BQU0sQ0FBQztJQUN4Qix5SEFBeUg7SUFDekgsbUJBQW1CLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDN0Isc0RBQXNEO0lBQ3RELHVCQUF1QixDQUFDLEVBQUUsT0FBTyxDQUFDO0lBQ2xDLGdDQUFnQztJQUNoQyxhQUFhLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDdkIsZ0NBQWdDO0lBQ2hDLGFBQWEsQ0FBQyxFQUFFLE1BQU0sQ0FBQztJQUN2QixpQ0FBaUM7SUFDakMsUUFBUSxDQUFDLEVBQUUsVUFBVSxDQUFDO0lBQ3RCLCtCQUErQjtJQUMvQixZQUFZLENBQUMsRUFBRSxZQUFZLENBQUM7SUFDNUIsMERBQTBEO0lBQzFELG9CQUFvQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzlCLGtDQUFrQztJQUNsQyxjQUFjLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDeEIsMERBQTBEO0lBQzFELHNCQUFzQixDQUFDLEVBQUUsY0FBYyxFQUFFLENBQUM7SUFDMUMscUJBQXFCO0lBQ3JCLG1CQUFtQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzdCLGtDQUFrQztJQUNsQyx5QkFBeUIsQ0FBQyxFQUFFLFVBQVUsQ0FBQztJQUN2Qyw2REFBNkQ7SUFDN0QsZ0JBQWdCLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDM0IsZ0ZBQWdGO0lBQ2hGLGdCQUFnQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzFCLDBFQUEwRTtJQUMxRSwwQkFBMEIsQ0FBQyxFQUFFLE1BQU0sQ0FBQztJQUNwQyxnRUFBZ0U7SUFDaEUsK0JBQStCLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDekMsd0dBQXdHO0lBQ3hHLDBCQUEwQixDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQ3BDLG9HQUFvRztJQUNwRywrQ0FBK0MsQ0FBQyxFQUFFLE1BQU0sQ0FBQztJQUN6RCx3R0FBd0c7SUFDeEcsa0RBQWtELENBQUMsRUFBRSxNQUFNLENBQUM7SUFDNUQsc0RBQXNEO0lBQ3RELDBCQUEwQixDQUFDLEVBQUUsT0FBTyxDQUFDO0lBQ3JDLGtHQUFrRztJQUNsRyw2QkFBNkIsQ0FBQyxFQUFFLE9BQU8sQ0FBQztJQUN4QyxnRkFBZ0Y7SUFDaEYsNkJBQTZCLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDeEMsbURBQW1EO0lBQ25ELHFCQUFxQixDQUFDLEVBQUUsT0FBTyxDQUFDO0lBQ2hDLHNHQUFzRztJQUN0RyxhQUFhLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDeEIsaUZBQWlGO0lBQ2pGLDBCQUEwQixDQUFDLEVBQUUsT0FBTyxDQUFDO0lBQ3JDLDZIQUE2SDtJQUM3SCxlQUFlLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDekIsK0VBQStFO0lBQy9FLHNCQUFzQixDQUFDLEVBQUUsT0FBTyxDQUFDO0lBQ2pDLGdFQUFnRTtJQUNoRSxnQ0FBZ0MsQ0FBQyxFQUFFLE9BQU8sQ0FBQztJQUMzQyxrSEFBa0g7SUFDbEgsc0JBQXNCLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDaEMsNEZBQTRGO0lBQzVGLGdDQUFnQyxDQUFDLEVBQUUsTUFBTSxDQUFDO0NBQzNDO0FBRUQsZUFBTyxNQUFNLHFCQUFxQjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7RUFtQ2pDLENBQUM7QUFFRixLQUFLLDJCQUEyQixHQUM1QiwyQkFBMkIsR0FDM0IsaUJBQWlCLEdBQ2pCLFVBQVUsR0FDVixjQUFjLEdBQ2Qsc0JBQXNCLEdBQ3RCLGdCQUFnQixHQUNoQiw0QkFBNEIsR0FDNUIsaUNBQWlDLEdBQ2pDLGtCQUFrQixHQUNsQix3QkFBd0IsR0FDeEIscUJBQXFCLEdBQ3JCLHdCQUF3QixDQUFDO0FBRTdCLE1BQU0sTUFBTSx1QkFBdUIsR0FBRyxRQUFRLENBQzVDLFFBQVEsQ0FBQyxJQUFJLENBQUMsZUFBZSxFQUFFLDJCQUEyQixDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsZUFBZSxFQUFFLDJCQUEyQixDQUFDLENBQ2xILENBQUMifQ==