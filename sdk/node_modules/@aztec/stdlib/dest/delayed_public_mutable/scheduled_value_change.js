import { Fr } from '@aztec/foundation/curves/bn254';
export class ScheduledValueChange {
    previous;
    post;
    timestampOfChange;
    constructor(previous, post, timestampOfChange){
        this.previous = previous;
        this.post = post;
        this.timestampOfChange = timestampOfChange;
        if (this.previous.length !== this.post.length) {
            throw new Error('Previous and post must have the same length');
        }
    }
    static empty(valueSize) {
        return new this(Array(valueSize).fill(new Fr(0)), Array(valueSize).fill(new Fr(0)), 0n);
    }
    isEmpty() {
        return this.previous.every((v)=>v.isZero()) && this.post.every((v)=>v.isZero()) && this.timestampOfChange === 0n;
    }
    getCurrentAt(timestamp) {
        if (timestamp < this.timestampOfChange) {
            return this.previous;
        } else {
            return this.post;
        }
    }
}
