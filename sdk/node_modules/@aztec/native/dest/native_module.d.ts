import { type LogLevel, type Logger } from '@aztec/foundation/log';
import type { MessageReceiver } from './msgpack_channel.js';
interface NativeClassCtor {
    new (...args: unknown[]): MessageReceiver;
}
export declare const NativeWorldState: NativeClassCtor;
export declare const NativeLMDBStore: NativeClassCtor;
/**
 * Contract provider interface for callbacks to fetch contract data.
 * These callbacks are invoked by C++ during simulation when contract data is needed.
 */
export interface ContractProvider {
    /**
     * Fetch a contract instance by address.
     * @param address - The contract address as a string (hex format)
     * @returns Promise resolving to msgpack-serialized ContractInstanceHint buffer, or undefined if not found
     */
    getContractInstance(address: string): Promise<Buffer | undefined>;
    /**
     * Fetch a contract class by class ID.
     * @param classId - The contract class ID as a string (hex format)
     * @returns Promise resolving to msgpack-serialized ContractClassHint buffer, or undefined if not found
     */
    getContractClass(classId: string): Promise<Buffer | undefined>;
    /**
     * Add contracts from deployment data.
     * @param contractDeploymentData - Msgpack-serialized ContractDeploymentData buffer
     * @returns Promise that resolves when contracts are added
     */
    addContracts(contractDeploymentData: Buffer): Promise<void>;
    /**
     * Fetch the bytecode commitment for a contract class.
     * @param classId - The contract class ID as a string (hex format)
     * @returns Promise resolving to msgpack-serialized Fr buffer, or undefined if not found
     */
    getBytecodeCommitment(classId: string): Promise<Buffer | undefined>;
    /**
     * Fetch the debug function name for a contract function.
     * @param address - The contract address as a string (hex format)
     * @param selector - The function selector as a string (hex format)
     * @returns Promise resolving to function name string, or undefined if not found
     */
    getDebugFunctionName(address: string, selector: string): Promise<string | undefined>;
    /**
     * Create a new checkpoint for the contract database state.
     * Enables rollback to current state in case of a revert.
     * @returns Promise that resolves when checkpoint is created
     */
    createCheckpoint(): Promise<void>;
    /**
     * Commit the current checkpoint, accepting its state as latest.
     * @returns Promise that resolves when checkpoint is committed
     */
    commitCheckpoint(): Promise<void>;
    /**
     * Revert the current checkpoint, discarding its state and rolling back.
     * @returns Promise that resolves when checkpoint is reverted
     */
    revertCheckpoint(): Promise<void>;
}
/**
 * Cancellation token handle used to cancel C++ AVM simulation.
 * The token is created via createCancellationToken() and can be cancelled via cancelSimulation().
 * Pass it to avmSimulate to enable cancellation support.
 */
export type CancellationToken = any;
/**
 * Create a new cancellation token for C++ simulation.
 * This token can be passed to avmSimulate and later cancelled via cancelSimulation().
 * @returns A handle to a cancellation token
 */
export declare function createCancellationToken(): CancellationToken;
/**
 * Signal cancellation to a C++ simulation.
 * The simulation will stop at the next opcode or before the next WorldState write.
 * @param token - The cancellation token previously passed to avmSimulate
 */
export declare function cancelSimulation(token: CancellationToken): void;
/**
 * AVM simulation function that takes serialized inputs and a contract provider.
 * The contract provider enables C++ to callback to TypeScript for contract data during simulation.
 * @param inputs - Msgpack-serialized AvmFastSimulationInputs buffer
 * @param contractProvider - Object with callbacks for fetching contract instances and classes
 * @param worldStateHandle - Native handle to WorldState instance
 * @param logLevel - Optional log level to control C++ verbosity (only used if loggerFunction is provided)
 * @param logger - Optional logger object for C++ logging callbacks
 * @param cancellationToken - Optional token to enable cancellation support
 * @returns Promise resolving to msgpack-serialized AvmCircuitPublicInputs buffer
 */
export declare function avmSimulate(inputs: Buffer, contractProvider: ContractProvider, worldStateHandle: any, logLevel?: LogLevel, logger?: Logger, cancellationToken?: CancellationToken): Promise<Buffer>;
/**
 * AVM simulation function that uses pre-collected hints from TypeScript simulation.
 * All contract data and merkle tree hints are included in the AvmCircuitInputs, so no runtime
 * callbacks to TS or WS pointer are needed.
 * @param inputs - Msgpack-serialized AvmCircuitInputs (AvmProvingInputs in C++) buffer
 * @param logLevel - Log level to control C++ verbosity
 * @returns Promise resolving to msgpack-serialized simulation results buffer
 */
export declare function avmSimulateWithHintedDbs(inputs: Buffer, logLevel?: LogLevel): Promise<Buffer>;
export {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF0aXZlX21vZHVsZS5kLnRzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL25hdGl2ZV9tb2R1bGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFFLEtBQUssUUFBUSxFQUFhLEtBQUssTUFBTSxFQUFFLE1BQU0sdUJBQXVCLENBQUM7QUFLOUUsT0FBTyxLQUFLLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFFNUQsVUFBVSxlQUFlO0lBQ3ZCLEtBQUssR0FBRyxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsZUFBZSxDQUFDO0NBQzNDO0FBYUQsZUFBTyxNQUFNLGdCQUFnQixFQUFFLGVBQTRELENBQUM7QUFDNUYsZUFBTyxNQUFNLGVBQWUsRUFBRSxlQUEyRCxDQUFDO0FBRTFGOzs7R0FHRztBQUNILE1BQU0sV0FBVyxnQkFBZ0I7SUFDL0I7Ozs7T0FJRztJQUNILG1CQUFtQixDQUFDLE9BQU8sRUFBRSxNQUFNLEdBQUcsT0FBTyxDQUFDLE1BQU0sR0FBRyxTQUFTLENBQUMsQ0FBQztJQUNsRTs7OztPQUlHO0lBQ0gsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBRS9EOzs7O09BSUc7SUFDSCxZQUFZLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUU1RDs7OztPQUlHO0lBQ0gscUJBQXFCLENBQUMsT0FBTyxFQUFFLE1BQU0sR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBRXBFOzs7OztPQUtHO0lBQ0gsb0JBQW9CLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxHQUFHLE9BQU8sQ0FBQyxNQUFNLEdBQUcsU0FBUyxDQUFDLENBQUM7SUFFckY7Ozs7T0FJRztJQUNILGdCQUFnQixJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUVsQzs7O09BR0c7SUFDSCxnQkFBZ0IsSUFBSSxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFFbEM7OztPQUdHO0lBQ0gsZ0JBQWdCLElBQUksT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0NBQ25DO0FBb0JEOzs7O0dBSUc7QUFDSCxNQUFNLE1BQU0saUJBQWlCLEdBQUcsR0FBRyxDQUFDO0FBRXBDOzs7O0dBSUc7QUFDSCx3QkFBZ0IsdUJBQXVCLElBQUksaUJBQWlCLENBRTNEO0FBRUQ7Ozs7R0FJRztBQUNILHdCQUFnQixnQkFBZ0IsQ0FBQyxLQUFLLEVBQUUsaUJBQWlCLEdBQUcsSUFBSSxDQUUvRDtBQWlCRDs7Ozs7Ozs7OztHQVVHO0FBQ0gsd0JBQXNCLFdBQVcsQ0FDL0IsTUFBTSxFQUFFLE1BQU0sRUFDZCxnQkFBZ0IsRUFBRSxnQkFBZ0IsRUFDbEMsZ0JBQWdCLEVBQUUsR0FBRyxFQUNyQixRQUFRLEdBQUUsUUFBaUIsRUFDM0IsTUFBTSxDQUFDLEVBQUUsTUFBTSxFQUNmLGlCQUFpQixDQUFDLEVBQUUsaUJBQWlCLEdBQ3BDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FlakI7QUFFRDs7Ozs7OztHQU9HO0FBQ0gsd0JBQXNCLHdCQUF3QixDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxHQUFFLFFBQWlCLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQU8zRyJ9