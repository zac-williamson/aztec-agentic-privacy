export interface MessageReceiver {
    call(msg: Buffer | Uint8Array): Promise<Buffer | Uint8Array>;
}
export type RoundtripDuration = {
    encodingUs: number;
    callUs: number;
    decodingUs: number;
    totalUs: number;
};
type MessageBody<T extends number> = {
    [K in T]: object | void;
};
export declare class MsgpackChannel<M extends number = number, Req extends MessageBody<M> = any, Resp extends MessageBody<M> = any> {
    private dest;
    /** A long-lived msgpack encoder */
    private encoder;
    private msgId;
    constructor(dest: MessageReceiver);
    sendMessage<T extends M>(msgType: T, body: Req[T]): Promise<{
        duration: RoundtripDuration;
        response: Resp[T];
    }>;
}
export {};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibXNncGFja19jaGFubmVsLmQudHMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvbXNncGFja19jaGFubmVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQU1BLE1BQU0sV0FBVyxlQUFlO0lBQzlCLElBQUksQ0FBQyxHQUFHLEVBQUUsTUFBTSxHQUFHLFVBQVUsR0FBRyxPQUFPLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxDQUFDO0NBQzlEO0FBRUQsTUFBTSxNQUFNLGlCQUFpQixHQUFHO0lBQzlCLFVBQVUsRUFBRSxNQUFNLENBQUM7SUFDbkIsTUFBTSxFQUFFLE1BQU0sQ0FBQztJQUNmLFVBQVUsRUFBRSxNQUFNLENBQUM7SUFDbkIsT0FBTyxFQUFFLE1BQU0sQ0FBQztDQUNqQixDQUFDO0FBWUYsS0FBSyxXQUFXLENBQUMsQ0FBQyxTQUFTLE1BQU0sSUFBSTtLQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxHQUFHLElBQUk7Q0FBRSxDQUFDO0FBRWpFLHFCQUFhLGNBQWMsQ0FDekIsQ0FBQyxTQUFTLE1BQU0sR0FBRyxNQUFNLEVBQ3pCLEdBQUcsU0FBUyxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRyxFQUNoQyxJQUFJLFNBQVMsV0FBVyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUc7SUFZZCxPQUFPLENBQUMsSUFBSTtJQVYvQixtQ0FBbUM7SUFDbkMsT0FBTyxDQUFDLE9BQU8sQ0FLWjtJQUVILE9BQU8sQ0FBQyxLQUFLLENBQUs7SUFFbEIsWUFBMkIsSUFBSSxFQUFFLGVBQWUsRUFBSTtJQUV2QyxXQUFXLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFDbEMsT0FBTyxFQUFFLENBQUMsRUFDVixJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUNYLE9BQU8sQ0FBQztRQUFFLFFBQVEsRUFBRSxpQkFBaUIsQ0FBQztRQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUE7S0FBRSxDQUFDLENBMEQ3RDtDQUNGIn0=