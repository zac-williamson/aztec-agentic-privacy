(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2451:function(t,e,s){Promise.resolve().then(s.t.bind(s,8877,23)),Promise.resolve().then(s.bind(s,7532)),Promise.resolve().then(s.bind(s,2267))},7532:function(t,e,s){"use strict";s.d(e,{default:function(){return l}});var a=s(7437),n=s(7138),r=s(1169),i=s(2267);let o=[{href:"/",label:"Trust Browser"},{href:"/audit",label:"Audit"},{href:"/vault",label:"Vault"}];function l(){let t=(0,r.usePathname)(),{isConnected:e,displayAddress:s,connect:l,disconnect:u,isConnecting:c}=(0,i.c)();return(0,a.jsx)("header",{className:"border-b border-wire sticky top-0 bg-void/95 backdrop-blur z-50",children:(0,a.jsxs)("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center gap-6",children:[(0,a.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 mr-2 shrink-0",children:[(0,a.jsx)("span",{className:"text-amber font-mono text-xs tracking-widest opacity-70",children:"â¬¡"}),(0,a.jsxs)("span",{className:"font-mono text-sm text-ink font-medium tracking-tight",children:["isnad",(0,a.jsx)("span",{className:"text-amber",children:"."}),"chain"]})]}),(0,a.jsx)("nav",{className:"flex items-center gap-1 flex-1",children:o.map(e=>{let{href:s,label:r}=e,i=t===s;return(0,a.jsx)(n.default,{href:s,className:"\n                  px-3 py-1.5 rounded text-xs font-mono transition-colors\n                  ".concat(i?"text-ink bg-wire-50":"text-ink-muted hover:text-ink hover:bg-void-300","\n                "),children:r},s)})}),(0,a.jsx)("div",{className:"flex items-center gap-3 shrink-0",children:e&&s?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-signal-trusted animate-pulse"}),(0,a.jsx)("span",{className:"font-mono text-xs text-ink-muted",children:s})]}),(0,a.jsx)("button",{onClick:u,className:"text-xs text-ink-muted hover:text-ink-muted/60 transition-colors font-mono",children:"disconnect"})]}):(0,a.jsx)("button",{onClick:l,disabled:c,className:" px-3 py-1.5 rounded border border-wire-50 text-xs font-mono text-ink-muted hover:border-amber hover:text-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed ",children:c?(0,a.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber animate-pulse"}),"connecting"]}):"connect wallet"})})]})})}},1266:function(t,e,s){"use strict";s.d(e,{v:function(){return i}});var a,n,r=s(357);let i={useMock:!0,pxeUrl:null!==(a=r.env.NEXT_PUBLIC_PXE_URL)&&void 0!==a?a:"http://localhost:8080",contractAddress:null!==(n=r.env.NEXT_PUBLIC_CONTRACT_ADDRESS)&&void 0!==n?n:"0x0000000000000000000000000000000000000000000000000000000000000000",appName:"The Isnad Chain",appDescription:"ZK Skill Attestation & Credential Registry for AI Agents",version:"0.1.0-devnet"}},2267:function(t,e,s){"use strict";s.d(e,{IsnadProvider:function(){return l},c:function(){return u}});var a=s(7437),n=s(2265),r=s(9768),i=s(1266);let o=(0,n.createContext)(null);function l(t){let{children:e}=t,[l,u]=(0,n.useState)(null),[c,d]=(0,n.useState)(null),[h,m]=(0,n.useState)(!1),[f,y]=(0,n.useState)(null),[w,b]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),v=(0,n.useCallback)(()=>{l&&b(l.getMyAttestations())},[l]),p=(0,n.useCallback)(()=>{l&&g(l.listCredentials())},[l]),k=(0,n.useCallback)(async()=>{m(!0),y(null);try{if(i.v.useMock){let t="0x2f5e9c1a4b8d7f3e6a2c5b8d1f4e7a3c9b6e2d5f8a1c4b7e3d6a9f2c5b8e1d4";await new Promise(t=>setTimeout(t,800));let e=new r.zW(t);u(e),d(t)}else{let{RealSdkWrapper:t}=await s.e(792).then(s.bind(s,2792)),e=await t.create(i.v.pxeUrl,i.v.contractAddress);u(e),d(e.walletAddress)}}catch(t){y(t instanceof Error?t.message:"Connection failed")}finally{m(!1)}},[]),A=(0,n.useCallback)(()=>{u(null),d(null),b([]),g([]),y(null)},[]);(0,n.useEffect)(()=>{l&&(b(l.getMyAttestations()),g(l.listCredentials()))},[l]);let C=c?"".concat(c.slice(0,8),"...").concat(c.slice(-6)):null;return(0,a.jsx)(o.Provider,{value:{sdk:l,isConnected:null!==l,displayAddress:C,walletAddress:c,connect:k,disconnect:A,error:f,isConnecting:h,myAttestations:w,refreshAttestations:v,credentialList:x,refreshCredentials:p},children:e})}function u(){let t=(0,n.useContext)(o);if(!t)throw Error("useIsnad must be used within <IsnadProvider>");return t}},9768:function(t,e,s){"use strict";s.d(e,{ri:function(){return o},zW:function(){return l}});let a=[{hash:"0x7f3ac4b82d19e8a1f5b6c3d4e9f2a0b7c8d5e6f1a2b3c4d5e6f7a8b9c0d1e2f",score:847n,count:9n,history:[{quality:95,daysAgo:2},{quality:88,daysAgo:3},{quality:92,daysAgo:5},{quality:78,daysAgo:7},{quality:100,daysAgo:9},{quality:85,daysAgo:12},{quality:90,daysAgo:15},{quality:72,daysAgo:18},{quality:47,daysAgo:21}]},{hash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2",score:312n,count:4n,history:[{quality:88,daysAgo:1},{quality:75,daysAgo:4},{quality:82,daysAgo:6},{quality:67,daysAgo:10}]},{hash:"0xdeadbeefcafebabe0102030405060708090a0b0c0d0e0f101112131415161718",score:0n,count:0n,history:[]}];function n(){let t=new Uint8Array(32);return"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues(t),"0x"+Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}function r(){let t=3e3+2e3*Math.random();return new Promise(e=>setTimeout(e,t))}function i(){return new Promise(t=>setTimeout(t,300+200*Math.random()))}async function o(t){let e=await t.arrayBuffer();return"0x"+Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",e))).map(t=>t.toString(16).padStart(2,"0")).join("")}class l{get walletAddress(){return this.state.walletAddress}async getTrustScore(t){var e,s;await i();let a=t.toLowerCase(),n=this.state.trustScores.get(a);return{skillHash:t,trustScore:null!==(e=null==n?void 0:n.score)&&void 0!==e?e:0n,attestationCount:null!==(s=null==n?void 0:n.count)&&void 0!==s?s:0n}}async getAttestationHistory(t){var e;await i();let s=t.toLowerCase(),a=this.state.trustScores.get(s);return null!==(e=null==a?void 0:a.history)&&void 0!==e?e:[]}async attest(t,e){var s;let a=t.skillHash.toLowerCase();if(this.state.myAttestations.some(t=>t.skillHash.toLowerCase()===a&&!t.revoked))throw Error("You have already attested this skill (SingleUseClaim prevents double-attestation).");null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500));let i=n(),o=new Date,l=null!==(s=this.state.trustScores.get(a))&&void 0!==s?s:{score:0n,count:0n,history:[]};return this.state.trustScores.set(a,{score:l.score+BigInt(t.quality),count:l.count+1n,history:[{quality:t.quality,ts:o},...l.history]}),this.state.myAttestations.unshift({skillHash:t.skillHash,quality:t.quality,timestamp:o,txHash:i,revoked:!1}),{txHash:i}}async revokeAttestation(t,e){let s=t.toLowerCase(),a=this.state.myAttestations.find(t=>t.skillHash.toLowerCase()===s&&!t.revoked);if(!a)throw Error("No active attestation found for this skill.");null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500));let i=n(),o=this.state.trustScores.get(s);return o&&this.state.trustScores.set(s,{score:o.score>=BigInt(a.quality)?o.score-BigInt(a.quality):0n,count:o.count>0n?o.count-1n:0n,history:o.history.filter(t=>t.ts!==a.timestamp)}),a.revoked=!0,{txHash:i}}getMyAttestations(){return[...this.state.myAttestations]}async storeCredential(t,e){if(this.state.credentials.has(t.keyId))throw Error("Credential '".concat(t.keyId,"' already exists. Use rotateCredential() to replace."));return null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.set(t.keyId,{label:t.label,value:t.value}),{txHash:n()}}async getCredential(t){await i();let e=this.state.credentials.get(t);return e?{keyId:t,value:e.value,label:e.label}:null}async deleteCredential(t,e){if(!this.state.credentials.has(t))throw Error("No credential found with keyId '".concat(t,"'."));return null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.delete(t),{txHash:n()}}async rotateCredential(t,e){if(!this.state.credentials.has(t.keyId))throw Error("No credential found with keyId '".concat(t.keyId,"'."));return null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.set(t.keyId,{label:t.newLabel,value:t.newValue}),{txHash:n()}}listCredentials(){return Array.from(this.state.credentials.entries()).map(t=>{let[e,{label:s}]=t;return{keyId:e,label:s}})}async grantCredentialAccess(t){var e;return await i(),{authwitNonce:null!==(e=t.nonce)&&void 0!==e?e:BigInt(Date.now())}}constructor(t){this.state=function(t){let e=new Map;for(let t of a){let s=Date.now();e.set(t.hash.toLowerCase(),{score:t.score,count:t.count,history:t.history.map(t=>{let{quality:e,daysAgo:a}=t;return{quality:e,ts:new Date(s-864e5*a)}})})}return{trustScores:e,myAttestations:[],credentials:new Map,walletAddress:t}}(t)}}},8877:function(){}},function(t){t.O(0,[404,349,971,23,744],function(){return t(t.s=2451)}),_N_E=t.O()}]);