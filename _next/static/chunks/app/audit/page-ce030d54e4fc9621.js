(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{7025:function(e,t,s){Promise.resolve().then(s.bind(s,4733))},4733:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var n=s(7437),r=s(2265),a=s(7781),i=s(251),o=s(2267),l=s(9768);function c(){let{sdk:e,myAttestations:t,refreshAttestations:s}=(0,o.c)(),[a,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(null),[x,m]=(0,r.useState)(80),[h,f]=(0,r.useState)("idle"),[p,v]=(0,r.useState)(),[b,g]=(0,r.useState)(),j=(0,r.useCallback)(async e=>{c(await (0,l.ri)(e)),u(e.name)},[]),y=(0,r.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&j(t)},[j]),N=(0,r.useCallback)(async()=>{if(e&&a.trim()){f("proving"),v(void 0),g(void 0);try{let t=await e.attest({skillHash:a.trim(),quality:x},e=>f(e));f("done"),v(t.txHash),s()}catch(e){f("error"),g(e instanceof Error?e.message:"Attestation failed")}}},[e,a,x,s]),k=(0,r.useCallback)(()=>{f("idle"),c(""),u(null),m(80),v(void 0),g(void 0)},[]),w="proving"===h||"submitting"===h,T=t.some(e=>e.skillHash.toLowerCase()===a.toLowerCase().trim()&&!e.revoked),C=x>=80?"Trusted":x>=50?"Cautious":"Risky",H=x>=80?"text-signal-trusted":x>=50?"text-signal-caution":"text-signal-danger";return(0,n.jsxs)("div",{className:"border border-wire rounded-lg overflow-hidden",children:[(0,n.jsx)("div",{className:"border-b border-wire bg-void-100 px-4 py-3",children:(0,n.jsx)("h2",{className:"font-mono text-sm text-ink",children:"Submit Attestation"})}),(0,n.jsxs)("div",{className:"p-6 space-y-6",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)("label",{className:"font-mono text-xs text-ink-muted",children:"Skill hash or file"}),(0,n.jsxs)("div",{className:"upload-zone rounded p-4 text-center cursor-pointer",onDragOver:e=>e.preventDefault(),onDrop:y,onClick:()=>{var e;return null===(e=document.getElementById("audit-file-input"))||void 0===e?void 0:e.click()},children:[(0,n.jsx)("input",{id:"audit-file-input",type:"file",className:"hidden",onChange:e=>{var t;return(null===(t=e.target.files)||void 0===t?void 0:t[0])&&j(e.target.files[0])}}),d?(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"font-mono text-xs text-amber",children:d}),(0,n.jsxs)("p",{className:"font-mono text-xs text-ink-muted truncate",children:[a.slice(0,32),"..."]})]}):(0,n.jsxs)("p",{className:"font-mono text-xs text-ink-muted",children:[(0,n.jsx)("span",{className:"text-ink hover:text-amber transition-colors",children:"Drop or click to upload skill file"})," ","— hash computed locally"]})]}),(0,n.jsx)("input",{type:"text",value:a,onChange:e=>{c(e.target.value),u(null)},placeholder:"or paste 0x hash directly...",className:" w-full bg-void-100 border border-wire rounded px-3 py-2 font-mono text-xs text-ink placeholder-ink-faint focus:border-amber transition-colors "}),T&&(0,n.jsx)("p",{className:"font-mono text-xs text-signal-caution",children:"⚠ You have already attested this skill. Double-attestation is prevented by ZK nullifier."})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("label",{className:"font-mono text-xs text-ink-muted",children:"Quality score"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("span",{className:"font-mono text-xs ".concat(H),children:C}),(0,n.jsx)("span",{className:"font-mono text-lg font-bold text-ink tabular-nums",children:x}),(0,n.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:"/ 100"})]})]}),(0,n.jsx)("input",{type:"range",min:0,max:100,value:x,onChange:e=>m(Number(e.target.value)),className:"w-full",disabled:w}),(0,n.jsxs)("div",{className:"flex justify-between font-mono text-xs text-ink-faint",children:[(0,n.jsx)("span",{children:"0 — do not install"}),(0,n.jsx)("span",{children:"50 — use with caution"}),(0,n.jsx)("span",{children:"100 — fully trusted"})]})]}),(0,n.jsx)(i.Z,{phase:h,txHash:p,error:b,onDismiss:"done"===h?k:void 0}),"done"!==h&&(0,n.jsx)("button",{onClick:N,disabled:w||!a.trim()||T,className:" w-full py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-30 disabled:cursor-not-allowed ",children:w?(0,n.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber animate-pulse"}),"proving"===h?"Generating ZK proof...":"Submitting..."]}):"Attest — anonymous ZK proof"}),(0,n.jsx)("p",{className:"font-mono text-xs text-ink-faint text-center leading-relaxed",children:"Your identity will not appear in public state. Only the trust score increments. Proof generation takes 3–60 seconds depending on hardware."})]})]})}function d(){let{sdk:e,myAttestations:t,refreshAttestations:s}=(0,o.c)(),[a,l]=(0,r.useState)(null),[c,d]=(0,r.useState)("idle"),[u,x]=(0,r.useState)(),[m,h]=(0,r.useState)(),f=(0,r.useCallback)(async t=>{if(e){l(t.skillHash),d("proving"),x(void 0),h(void 0);try{let n=await e.revokeAttestation(t.skillHash,e=>d(e));d("done"),x(n.txHash),s(),setTimeout(()=>{l(null),d("idle")},3e3)}catch(e){d("error"),h(e instanceof Error?e.message:"Revocation failed")}}},[e,s]),p=t.filter(e=>!e.revoked),v=t.filter(e=>e.revoked);return(0,n.jsxs)("div",{className:"border border-wire rounded-lg overflow-hidden",children:[(0,n.jsxs)("div",{className:"border-b border-wire bg-void-100 px-4 py-3 flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"font-mono text-sm text-ink",children:"Your Attestation History"}),(0,n.jsx)("span",{className:"font-mono text-xs text-ink-muted",children:"private — only visible in your PXE"})]}),(0,n.jsxs)("div",{className:"divide-y divide-wire",children:[0===t.length&&(0,n.jsxs)("div",{className:"p-6 text-center",children:[(0,n.jsx)("p",{className:"font-mono text-sm text-ink-muted",children:"No attestations yet."}),(0,n.jsx)("p",{className:"font-mono text-xs text-ink-faint mt-1",children:"Attest a skill to build your private audit history."})]}),p.map(e=>{let t=a===e.skillHash&&"idle"!==c,s=Math.floor((Date.now()-e.timestamp.getTime())/864e5);return(0,n.jsxs)("div",{className:"p-4 space-y-3",children:[(0,n.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,n.jsxs)("div",{className:"space-y-1 min-w-0",children:[(0,n.jsxs)("div",{className:"font-mono text-xs text-ink break-all",children:[e.skillHash.slice(0,20),"...",e.skillHash.slice(-8)]}),(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsxs)("span",{className:"font-mono text-xs text-ink-muted",children:["quality: ",(0,n.jsx)("span",{className:"text-signal-trusted",children:e.quality})]}),(0,n.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:0===s?"just now":1===s?"1 day ago":"".concat(s," days ago")})]})]}),!t&&(0,n.jsx)("button",{onClick:()=>f(e),className:" shrink-0 px-3 py-1 rounded border border-wire text-xs font-mono text-ink-muted hover:border-signal-danger hover:text-signal-danger transition-colors ",children:"Revoke"})]}),t&&(0,n.jsx)(i.Z,{phase:c,txHash:u,error:m})]},e.txHash)}),v.length>0&&(0,n.jsx)("div",{className:"p-4",children:(0,n.jsxs)("details",{className:"group",children:[(0,n.jsxs)("summary",{className:"font-mono text-xs text-ink-faint cursor-pointer hover:text-ink-muted",children:[v.length," revoked attestation",v.length>1?"s":""]}),(0,n.jsx)("div",{className:"mt-3 space-y-2",children:v.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-3 opacity-50",children:[(0,n.jsxs)("span",{className:"font-mono text-xs text-ink-muted line-through break-all",children:[e.skillHash.slice(0,20),"..."]}),(0,n.jsx)("span",{className:"font-mono text-xs text-signal-danger",children:"revoked"})]},e.txHash))})]})})]})]})}function u(){return(0,n.jsxs)("div",{className:"space-y-10",children:[(0,n.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,n.jsxs)("h1",{className:"font-mono text-2xl text-ink",children:[(0,n.jsx)("span",{className:"text-amber",children:"⬡"})," Auditor Dashboard"]}),(0,n.jsx)("p",{className:"font-mono text-sm text-ink-muted max-w-2xl leading-relaxed",children:"Submit anonymous attestations for skills you have examined. A ZK proof is generated locally — your identity never appears in public contract state. Only the aggregate trust score is visible to anyone."})]}),(0,n.jsx)(a.Z,{message:"Connect your wallet to submit attestations and view your private audit history.",children:(0,n.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,n.jsx)(c,{}),(0,n.jsx)(d,{})]})})]})}},251:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var n=s(7437),r=s(2265);let a={idle:{label:"",detail:"",color:"bg-amber",pulse:!1},proving:{label:"Generating ZK proof",detail:"This takes 3–60 seconds depending on hardware. Your identity is never revealed.",color:"bg-amber",pulse:!0},submitting:{label:"Proof verified — submitting transaction",detail:"Broadcasting to the Aztec network...",color:"bg-signal-caution",pulse:!0},done:{label:"Transaction confirmed",detail:"",color:"bg-signal-trusted",pulse:!1},error:{label:"Transaction failed",detail:"",color:"bg-signal-danger",pulse:!1}};function i(e){let{phase:t,txHash:s,error:i,onDismiss:o}=e,[l,c]=(0,r.useState)(0);if((0,r.useEffect)(()=>{if("proving"!==t){c(0);return}let e=Date.now(),s=setInterval(()=>{c(Math.floor((Date.now()-e)/1e3))},500);return()=>clearInterval(s)},[t]),"idle"===t)return null;let d=a[t];return(0,n.jsxs)("div",{className:"\n      rounded border p-4 space-y-3\n      ".concat("done"===t?"border-signal-trusted/30 bg-signal-trusted/5":"","\n      ").concat("error"===t?"border-signal-danger/30 bg-signal-danger/5":"","\n      ").concat("proving"===t||"submitting"===t?"border-amber/30 bg-amber/5":"","\n    "),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"\n            w-2 h-2 rounded-full shrink-0\n            ".concat(d.color,"\n            ").concat(d.pulse?"animate-pulse":"","\n          ")}),(0,n.jsx)("span",{className:"font-mono text-sm text-ink",children:d.label}),"proving"===t&&(0,n.jsxs)("span",{className:"font-mono text-xs text-ink-muted ml-auto",children:[l,"s"]}),("done"===t||"error"===t)&&o&&(0,n.jsx)("button",{onClick:o,className:"ml-auto text-ink-muted hover:text-ink text-xs font-mono",children:"dismiss"})]}),d.detail&&(0,n.jsx)("p",{className:"text-xs text-ink-muted font-mono",children:d.detail}),("proving"===t||"submitting"===t)&&(0,n.jsx)("div",{className:"relative h-0.5 bg-wire overflow-hidden rounded-full",children:(0,n.jsx)("div",{className:"absolute inset-y-0 w-1/3 bg-amber/60 scanline rounded-full"})}),"done"===t&&s&&(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,n.jsx)("span",{className:"text-xs text-ink-muted font-mono",children:"tx:"}),(0,n.jsxs)("a",{href:"#",className:"font-mono text-xs text-signal-trusted hover:underline break-all",title:s,children:[s.slice(0,18),"...",s.slice(-8)]})]}),"error"===t&&i&&(0,n.jsx)("p",{className:"text-xs text-signal-danger font-mono",children:i}),"proving"===t&&(0,n.jsx)("p",{className:"text-xs text-ink-faint font-mono border-t border-wire pt-2",children:"⬡ Your identity will not appear in public state. Only the trust score increments."})]})}},7781:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var n=s(7437),r=s(2267);function a(e){let{children:t,message:s="Connect your wallet to use this feature."}=e,{isConnected:a,connect:i,isConnecting:o,error:l}=(0,r.c)();return a?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 gap-6",children:[(0,n.jsx)("div",{className:"text-4xl text-wire-100 font-mono select-none",children:"⬡"}),(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("p",{className:"text-ink-muted font-mono text-sm",children:s}),(0,n.jsx)("p",{className:"text-ink-faint font-mono text-xs",children:"Demo mode — no real wallet required"})]}),l&&(0,n.jsx)("p",{className:"font-mono text-xs text-signal-danger max-w-sm text-center",children:l}),(0,n.jsx)("button",{onClick:i,disabled:o,className:" px-6 py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2 ",children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber animate-pulse"}),"Connecting to PXE..."]}):"Connect Wallet"})]})}},357:function(e,t,s){"use strict";var n,r;e.exports=(null==(n=s.g.process)?void 0:n.env)&&"object"==typeof(null==(r=s.g.process)?void 0:r.env)?s.g.process:s(8081)},8081:function(e){!function(){var t={229:function(e){var t,s,n,r=e.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===a||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(s){try{return t.call(null,e,0)}catch(s){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:a}catch(e){t=a}try{s="function"==typeof clearTimeout?clearTimeout:i}catch(e){s=i}}();var l=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?l=n.concat(l):d=-1,l.length&&x())}function x(){if(!c){var e=o(u);c=!0;for(var t=l.length;t;){for(n=l,l=[];++d<t;)n&&n[d].run();d=-1,t=l.length}n=null,c=!1,function(e){if(s===clearTimeout)return clearTimeout(e);if((s===i||!s)&&clearTimeout)return s=clearTimeout,clearTimeout(e);try{s(e)}catch(t){try{return s.call(null,e)}catch(t){return s.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];l.push(new m(e,t)),1!==l.length||c||o(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw Error("process.chdir is not supported")},r.umask=function(){return 0}}},s={};function n(e){var r=s[e];if(void 0!==r)return r.exports;var a=s[e]={exports:{}},i=!0;try{t[e](a,a.exports,n),i=!1}finally{i&&delete s[e]}return a.exports}n.ab="//";var r=n(229);e.exports=r}()}},function(e){e.O(0,[267,971,23,744],function(){return e(e.s=7025)}),_N_E=e.O()}]);