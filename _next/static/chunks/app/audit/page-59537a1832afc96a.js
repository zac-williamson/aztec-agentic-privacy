(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[28],{7025:function(e,t,n){Promise.resolve().then(n.bind(n,4733))},4733:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var s=n(7437),a=n(2265),i=n(7781),r=n(251),o=n(2267),l=n(9768);function c(){let{sdk:e,myAttestations:t,refreshAttestations:n}=(0,o.c)(),[i,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(null),[x,m]=(0,a.useState)(80),[h,f]=(0,a.useState)(0),[p,b]=(0,a.useState)("idle"),[v,g]=(0,a.useState)(),[j,y]=(0,a.useState)(),N=(0,a.useCallback)(async e=>{c(await (0,l.ri)(e)),u(e.name)},[]),k=(0,a.useCallback)(e=>{e.preventDefault();let t=e.dataTransfer.files[0];t&&N(t)},[N]),w=(0,a.useCallback)(async()=>{if(e&&i.trim()){b("proving"),g(void 0),y(void 0);try{let t=await e.attest({skillHash:i.trim(),quality:x,claimType:h},e=>b(e));b("done"),g(t.txHash),n()}catch(e){b("error"),y(e instanceof Error?e.message:"Attestation failed")}}},[e,i,x,n]),D=(0,a.useCallback)(()=>{b("idle"),c(""),u(null),m(80),f(0),g(void 0),y(void 0)},[]),C="proving"===p||"submitting"===p,T=t.some(e=>e.skillHash.toLowerCase()===i.toLowerCase().trim()&&!e.revoked),S=x>=80?"Trusted":x>=50?"Cautious":"Risky",H=x>=80?"text-signal-trusted":x>=50?"text-signal-caution":"text-signal-danger";return(0,s.jsxs)("div",{className:"border border-wire rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-wire bg-void-100 px-4 py-3",children:(0,s.jsx)("h2",{className:"font-mono text-sm text-ink",children:"Submit Attestation"})}),(0,s.jsxs)("div",{className:"p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"font-mono text-xs text-ink-muted",children:"Skill hash or file"}),(0,s.jsxs)("div",{className:"upload-zone rounded p-4 text-center cursor-pointer",onDragOver:e=>e.preventDefault(),onDrop:k,onClick:()=>{var e;return null===(e=document.getElementById("audit-file-input"))||void 0===e?void 0:e.click()},children:[(0,s.jsx)("input",{id:"audit-file-input",type:"file",className:"hidden",onChange:e=>{var t;return(null===(t=e.target.files)||void 0===t?void 0:t[0])&&N(e.target.files[0])}}),d?(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("p",{className:"font-mono text-xs text-amber",children:d}),(0,s.jsxs)("p",{className:"font-mono text-xs text-ink-muted truncate",children:[i.slice(0,32),"..."]})]}):(0,s.jsxs)("p",{className:"font-mono text-xs text-ink-muted",children:[(0,s.jsx)("span",{className:"text-ink hover:text-amber transition-colors",children:"Drop or click to upload skill file"})," ","— hash computed locally"]})]}),(0,s.jsx)("input",{type:"text",value:i,onChange:e=>{c(e.target.value),u(null)},placeholder:"or paste 0x hash directly...",className:" w-full bg-void-100 border border-wire rounded px-3 py-2 font-mono text-xs text-ink placeholder-ink-faint focus:border-amber transition-colors "}),T&&(0,s.jsx)("p",{className:"font-mono text-xs text-signal-caution",children:"⚠ You have already attested this skill. Double-attestation is prevented by ZK nullifier."})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"font-mono text-xs text-ink-muted",children:"Quality score"}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-mono text-xs ".concat(H),children:S}),(0,s.jsx)("span",{className:"font-mono text-lg font-bold text-ink tabular-nums",children:x}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:"/ 100"})]})]}),(0,s.jsx)("input",{type:"range",min:0,max:100,value:x,onChange:e=>m(Number(e.target.value)),className:"w-full",disabled:C}),(0,s.jsxs)("div",{className:"flex justify-between font-mono text-xs text-ink-faint",children:[(0,s.jsx)("span",{children:"0 — do not install"}),(0,s.jsx)("span",{children:"50 — use with caution"}),(0,s.jsx)("span",{children:"100 — fully trusted"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"font-mono text-xs text-ink-muted",children:"Audit methodology"}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:"stored privately"})]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:0,icon:"\uD83D\uDCC4",label:"static",title:"Code Review",desc:"YARA rules, linting, dependency scan"},{value:1,icon:"\uD83D\uDD2C",label:"behavioral",title:"Behavioral",desc:"Runtime monitoring, syscall tracing"},{value:2,icon:"\uD83D\uDD12",label:"sandboxed",title:"Sandboxed",desc:"Isolated execution, output verification"}].map(e=>{let{value:t,icon:n,label:a,title:i,desc:r}=e;return(0,s.jsxs)("button",{type:"button",onClick:()=>f(t),disabled:C,className:"\n                  flex flex-col items-center gap-1 px-2 py-3 rounded border text-center transition-colors\n                  ".concat(h===t?"border-amber bg-amber/5 text-ink":"border-wire text-ink-muted hover:border-ink-muted hover:text-ink","\n                  disabled:opacity-30 disabled:cursor-not-allowed\n                "),title:r,children:[(0,s.jsx)("span",{className:"text-base",children:n}),(0,s.jsx)("span",{className:"font-mono text-xs font-medium",children:i}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:a})]},t)})}),(0,s.jsx)("p",{className:"font-mono text-xs text-ink-faint leading-relaxed",children:"Your audit method is stored only in your private attestation note — never visible on-chain."})]}),(0,s.jsx)(r.Z,{phase:p,txHash:v,error:j,onDismiss:"done"===p?D:void 0}),"done"!==p&&(0,s.jsx)("button",{onClick:w,disabled:C||!i.trim()||T,className:" w-full py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-30 disabled:cursor-not-allowed ",children:C?(0,s.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber animate-pulse"}),"proving"===p?"Generating ZK proof...":"Submitting..."]}):"Attest — anonymous ZK proof"}),(0,s.jsx)("p",{className:"font-mono text-xs text-ink-faint text-center leading-relaxed",children:"Your identity will not appear in public state. Only the trust score increments. Proof generation takes 3–60 seconds depending on hardware."})]})]})}function d(){let{sdk:e,myAttestations:t,refreshAttestations:n}=(0,o.c)(),[i,l]=(0,a.useState)(null),[c,d]=(0,a.useState)("idle"),[u,x]=(0,a.useState)(),[m,h]=(0,a.useState)(),f=(0,a.useCallback)(async t=>{if(e){l(t.skillHash),d("proving"),x(void 0),h(void 0);try{let s=await e.revokeAttestation(t.skillHash,e=>d(e));d("done"),x(s.txHash),n(),setTimeout(()=>{l(null),d("idle")},3e3)}catch(e){d("error"),h(e instanceof Error?e.message:"Revocation failed")}}},[e,n]),p=t.filter(e=>!e.revoked),b=t.filter(e=>e.revoked);return(0,s.jsxs)("div",{className:"border border-wire rounded-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"border-b border-wire bg-void-100 px-4 py-3 flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"font-mono text-sm text-ink",children:"Your Attestation History"}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-muted",children:"private — only visible in your PXE"})]}),(0,s.jsxs)("div",{className:"divide-y divide-wire",children:[0===t.length&&(0,s.jsxs)("div",{className:"p-6 text-center",children:[(0,s.jsx)("p",{className:"font-mono text-sm text-ink-muted",children:"No attestations yet."}),(0,s.jsx)("p",{className:"font-mono text-xs text-ink-faint mt-1",children:"Attest a skill to build your private audit history."})]}),p.map(e=>{let t=i===e.skillHash&&"idle"!==c,n=Math.floor((Date.now()-e.timestamp.getTime())/864e5),a=1===e.claimType?"\uD83D\uDD2C behavioral":2===e.claimType?"\uD83D\uDD12 sandboxed":"\uD83D\uDCC4 static";return(0,s.jsxs)("div",{className:"p-4 space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"space-y-1 min-w-0",children:[(0,s.jsxs)("div",{className:"font-mono text-xs text-ink break-all",children:[e.skillHash.slice(0,20),"...",e.skillHash.slice(-8)]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"font-mono text-xs text-ink-muted",children:["quality: ",(0,s.jsx)("span",{className:"text-signal-trusted",children:e.quality})]}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:a}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-faint",children:0===n?"just now":1===n?"1 day ago":"".concat(n," days ago")})]})]}),!t&&(0,s.jsx)("button",{onClick:()=>f(e),className:" shrink-0 px-3 py-1 rounded border border-wire text-xs font-mono text-ink-muted hover:border-signal-danger hover:text-signal-danger transition-colors ",children:"Revoke"})]}),t&&(0,s.jsx)(r.Z,{phase:c,txHash:u,error:m})]},e.txHash)}),b.length>0&&(0,s.jsx)("div",{className:"p-4",children:(0,s.jsxs)("details",{className:"group",children:[(0,s.jsxs)("summary",{className:"font-mono text-xs text-ink-faint cursor-pointer hover:text-ink-muted",children:[b.length," revoked attestation",b.length>1?"s":""]}),(0,s.jsx)("div",{className:"mt-3 space-y-2",children:b.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 opacity-50",children:[(0,s.jsxs)("span",{className:"font-mono text-xs text-ink-muted line-through break-all",children:[e.skillHash.slice(0,20),"..."]}),(0,s.jsx)("span",{className:"font-mono text-xs text-signal-danger",children:"revoked"})]},e.txHash))})]})})]})]})}function u(){return(0,s.jsxs)("div",{className:"space-y-10",children:[(0,s.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,s.jsxs)("h1",{className:"font-mono text-2xl text-ink",children:[(0,s.jsx)("span",{className:"text-amber",children:"⬡"})," Auditor Dashboard"]}),(0,s.jsx)("p",{className:"font-mono text-sm text-ink-muted max-w-2xl leading-relaxed",children:"Submit anonymous attestations for skills you have examined. A ZK proof is generated locally — your identity never appears in public contract state. Only the aggregate trust score is visible to anyone."})]}),(0,s.jsx)(i.Z,{message:"Connect your wallet to submit attestations and view your private audit history.",children:(0,s.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,s.jsx)(c,{}),(0,s.jsx)(d,{})]})})]})}},251:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});var s=n(7437),a=n(2265);let i={idle:{label:"",detail:"",color:"bg-amber",pulse:!1},proving:{label:"Generating ZK proof",detail:"This takes 3–60 seconds depending on hardware. Your identity is never revealed.",color:"bg-amber",pulse:!0},submitting:{label:"Proof verified — submitting transaction",detail:"Broadcasting to the Aztec network...",color:"bg-signal-caution",pulse:!0},done:{label:"Transaction confirmed",detail:"",color:"bg-signal-trusted",pulse:!1},error:{label:"Transaction failed",detail:"",color:"bg-signal-danger",pulse:!1}};function r(e){let{phase:t,txHash:n,error:r,onDismiss:o}=e,[l,c]=(0,a.useState)(0);if((0,a.useEffect)(()=>{if("proving"!==t){c(0);return}let e=Date.now(),n=setInterval(()=>{c(Math.floor((Date.now()-e)/1e3))},500);return()=>clearInterval(n)},[t]),"idle"===t)return null;let d=i[t];return(0,s.jsxs)("div",{className:"\n      rounded border p-4 space-y-3\n      ".concat("done"===t?"border-signal-trusted/30 bg-signal-trusted/5":"","\n      ").concat("error"===t?"border-signal-danger/30 bg-signal-danger/5":"","\n      ").concat("proving"===t||"submitting"===t?"border-amber/30 bg-amber/5":"","\n    "),children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"\n            w-2 h-2 rounded-full shrink-0\n            ".concat(d.color,"\n            ").concat(d.pulse?"animate-pulse":"","\n          ")}),(0,s.jsx)("span",{className:"font-mono text-sm text-ink",children:d.label}),"proving"===t&&(0,s.jsxs)("span",{className:"font-mono text-xs text-ink-muted ml-auto",children:[l,"s"]}),("done"===t||"error"===t)&&o&&(0,s.jsx)("button",{onClick:o,className:"ml-auto text-ink-muted hover:text-ink text-xs font-mono",children:"dismiss"})]}),d.detail&&(0,s.jsx)("p",{className:"text-xs text-ink-muted font-mono",children:d.detail}),("proving"===t||"submitting"===t)&&(0,s.jsx)("div",{className:"relative h-0.5 bg-wire overflow-hidden rounded-full",children:(0,s.jsx)("div",{className:"absolute inset-y-0 w-1/3 bg-amber/60 scanline rounded-full"})}),"done"===t&&n&&(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,s.jsx)("span",{className:"text-xs text-ink-muted font-mono",children:"tx:"}),(0,s.jsxs)("a",{href:"#",className:"font-mono text-xs text-signal-trusted hover:underline break-all",title:n,children:[n.slice(0,18),"...",n.slice(-8)]})]}),"error"===t&&r&&(0,s.jsx)("p",{className:"text-xs text-signal-danger font-mono",children:r}),"proving"===t&&(0,s.jsx)("p",{className:"text-xs text-ink-faint font-mono border-t border-wire pt-2",children:"⬡ Your identity will not appear in public state. Only the trust score increments."})]})}},7781:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var s=n(7437),a=n(2267);function i(e){let{children:t,message:n="Connect your wallet to use this feature."}=e,{isConnected:i,connect:r,isConnecting:o,error:l}=(0,a.c)();return i?(0,s.jsx)(s.Fragment,{children:t}):(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 gap-6",children:[(0,s.jsx)("div",{className:"text-4xl text-wire-100 font-mono select-none",children:"⬡"}),(0,s.jsxs)("div",{className:"text-center space-y-2",children:[(0,s.jsx)("p",{className:"text-ink-muted font-mono text-sm",children:n}),(0,s.jsx)("p",{className:"text-ink-faint font-mono text-xs",children:"Demo mode — no real wallet required"})]}),l&&(0,s.jsx)("p",{className:"font-mono text-xs text-signal-danger max-w-sm text-center",children:l}),(0,s.jsx)("button",{onClick:r,disabled:o,className:" px-6 py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2 ",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber animate-pulse"}),"Connecting to PXE..."]}):"Connect Wallet"})]})}},357:function(e,t,n){"use strict";var s,a;e.exports=(null==(s=n.g.process)?void 0:s.env)&&"object"==typeof(null==(a=n.g.process)?void 0:a.env)?n.g.process:n(8081)},8081:function(e){!function(){var t={229:function(e){var t,n,s,a=e.exports={};function i(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{n="function"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var l=[],c=!1,d=-1;function u(){c&&s&&(c=!1,s.length?l=s.concat(l):d=-1,l.length&&x())}function x(){if(!c){var e=o(u);c=!0;for(var t=l.length;t;){for(s=l,l=[];++d<t;)s&&s[d].run();d=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||c||o(x)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},n={};function s(e){var a=n[e];if(void 0!==a)return a.exports;var i=n[e]={exports:{}},r=!0;try{t[e](i,i.exports,s),r=!1}finally{r&&delete n[e]}return i.exports}s.ab="//";var a=s(229);e.exports=a}()}},function(e){e.O(0,[267,971,23,744],function(){return e(e.s=7025)}),_N_E=e.O()}]);