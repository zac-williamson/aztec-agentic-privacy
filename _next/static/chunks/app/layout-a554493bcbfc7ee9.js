(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{4073:function(t,e,a){Promise.resolve().then(a.t.bind(a,8877,23)),Promise.resolve().then(a.bind(a,7532)),Promise.resolve().then(a.bind(a,2267))},7532:function(t,e,a){"use strict";a.d(e,{default:function(){return l}});var s=a(7437),n=a(7138),r=a(1169),i=a(2267);let o=[{href:"/",label:"Trust Browser"},{href:"/audit",label:"Audit"},{href:"/vault",label:"Vault"}];function l(){let t=(0,r.usePathname)(),{isConnected:e,displayAddress:a,connect:l,disconnect:c,isConnecting:u}=(0,i.c)();return(0,s.jsx)("header",{className:"border-b border-wire sticky top-0 bg-void/95 backdrop-blur z-50",children:(0,s.jsxs)("div",{className:"max-w-5xl mx-auto px-4 h-14 flex items-center gap-6",children:[(0,s.jsxs)(n.default,{href:"/",className:"flex items-center gap-2 mr-2 shrink-0",children:[(0,s.jsx)("span",{className:"text-amber font-mono text-xs tracking-widest opacity-70",children:"â¬¡"}),(0,s.jsxs)("span",{className:"font-mono text-sm text-ink font-medium tracking-tight",children:["isnad",(0,s.jsx)("span",{className:"text-amber",children:"."}),"chain"]})]}),(0,s.jsx)("nav",{className:"flex items-center gap-1 flex-1",children:o.map(e=>{let{href:a,label:r}=e,i=t===a;return(0,s.jsx)(n.default,{href:a,className:"\n                  px-3 py-1.5 rounded text-xs font-mono transition-colors\n                  ".concat(i?"text-ink bg-wire-50":"text-ink-muted hover:text-ink hover:bg-void-300","\n                "),children:r},a)})}),(0,s.jsx)("div",{className:"flex items-center gap-3 shrink-0",children:e&&a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-signal-trusted animate-pulse"}),(0,s.jsx)("span",{className:"font-mono text-xs text-ink-muted",children:a})]}),(0,s.jsx)("button",{onClick:c,className:"text-xs text-ink-muted hover:text-ink-muted/60 transition-colors font-mono",children:"disconnect"})]}):(0,s.jsx)("button",{onClick:l,disabled:u,className:" px-3 py-1.5 rounded border border-wire-50 text-xs font-mono text-ink-muted hover:border-amber hover:text-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed ",children:u?(0,s.jsxs)("span",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-amber animate-pulse"}),"connecting"]}):"connect wallet"})})]})})}},1266:function(t,e,a){"use strict";a.d(e,{v:function(){return s}});let s={useMock:!0,pxeUrl:"http://localhost:8080",contractAddress:"0x127bfb034e149e8ce44b0036833a0bb1ab230930a7ea814fea7eac1a4bcb2747",appName:"The Isnad Chain",appDescription:"ZK Skill Attestation & Credential Registry for AI Agents",version:"0.1.0-devnet"}},2267:function(t,e,a){"use strict";a.d(e,{IsnadProvider:function(){return l},c:function(){return c}});var s=a(7437),n=a(2265),r=a(9768),i=a(1266);let o=(0,n.createContext)(null);function l(t){let{children:e}=t,[l,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(null),[h,f]=(0,n.useState)(!1),[m,y]=(0,n.useState)(null),[b,w]=(0,n.useState)([]),[x,g]=(0,n.useState)([]),p=(0,n.useCallback)(()=>{l&&w(l.getMyAttestations())},[l]),v=(0,n.useCallback)(()=>{l&&g(l.listCredentials())},[l]),k=(0,n.useCallback)(async()=>{f(!0),y(null);try{if(i.v.useMock){let t="0x2f5e9c1a4b8d7f3e6a2c5b8d1f4e7a3c9b6e2d5f8a1c4b7e3d6a9f2c5b8e1d4";await new Promise(t=>setTimeout(t,800));let e=new r.zW(t);c(e),d(t)}else{let{RealSdkWrapper:t}=await a.e(792).then(a.bind(a,2792)),e=await t.create(i.v.pxeUrl,i.v.contractAddress);c(e),d(e.walletAddress)}}catch(t){y(t instanceof Error?t.message:"Connection failed")}finally{f(!1)}},[]),A=(0,n.useCallback)(()=>{c(null),d(null),w([]),g([]),y(null)},[]);(0,n.useEffect)(()=>{l&&(w(l.getMyAttestations()),g(l.listCredentials()))},[l]);let C=u?"".concat(u.slice(0,8),"...").concat(u.slice(-6)):null;return(0,s.jsx)(o.Provider,{value:{sdk:l,isConnected:null!==l,displayAddress:C,walletAddress:u,connect:k,disconnect:A,error:m,isConnecting:h,myAttestations:b,refreshAttestations:p,credentialList:x,refreshCredentials:v},children:e})}function c(){let t=(0,n.useContext)(o);if(!t)throw Error("useIsnad must be used within <IsnadProvider>");return t}},9768:function(t,e,a){"use strict";a.d(e,{ri:function(){return o},zW:function(){return l}});let s=[{hash:"0x7f3ac4b82d19e8a1f5b6c3d4e9f2a0b7c8d5e6f1a2b3c4d5e6f7a8b9c0d1e2f",score:847n,count:9n,history:[{quality:95,daysAgo:2},{quality:88,daysAgo:3},{quality:92,daysAgo:5},{quality:78,daysAgo:7},{quality:100,daysAgo:9},{quality:85,daysAgo:12},{quality:90,daysAgo:15},{quality:72,daysAgo:18},{quality:47,daysAgo:21}]},{hash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2",score:312n,count:4n,history:[{quality:88,daysAgo:1},{quality:75,daysAgo:4},{quality:82,daysAgo:6},{quality:67,daysAgo:10}]},{hash:"0xdeadbeefcafebabe0102030405060708090a0b0c0d0e0f101112131415161718",score:0n,count:0n,history:[]}];function n(){let t=new Uint8Array(32);return"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues(t),"0x"+Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}function r(){let t=3e3+2e3*Math.random();return new Promise(e=>setTimeout(e,t))}function i(){return new Promise(t=>setTimeout(t,300+200*Math.random()))}async function o(t){let e=await t.arrayBuffer();return"0x"+Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",e))).map(t=>t.toString(16).padStart(2,"0")).join("")}class l{get walletAddress(){return this.state.walletAddress}async getTrustScore(t){var e,a;await i();let s=t.toLowerCase(),n=this.state.trustScores.get(s);return{skillHash:t,trustScore:null!==(e=null==n?void 0:n.score)&&void 0!==e?e:0n,attestationCount:null!==(a=null==n?void 0:n.count)&&void 0!==a?a:0n}}async getAttestationHistory(t){var e;await i();let a=t.toLowerCase(),s=this.state.trustScores.get(a);return null!==(e=null==s?void 0:s.history)&&void 0!==e?e:[]}async attest(t,e){var a;let s=t.skillHash.toLowerCase();if(this.state.myAttestations.some(t=>t.skillHash.toLowerCase()===s&&!t.revoked))throw Error("You have already attested this skill (SingleUseClaim prevents double-attestation).");null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500));let i=n(),o=new Date,l=null!==(a=this.state.trustScores.get(s))&&void 0!==a?a:{score:0n,count:0n,history:[]};return this.state.trustScores.set(s,{score:l.score+BigInt(t.quality),count:l.count+1n,history:[{quality:t.quality,ts:o},...l.history]}),this.state.myAttestations.unshift({skillHash:t.skillHash,quality:t.quality,timestamp:o,txHash:i,revoked:!1}),{txHash:i}}async revokeAttestation(t,e){let a=t.toLowerCase(),s=this.state.myAttestations.find(t=>t.skillHash.toLowerCase()===a&&!t.revoked);if(!s)throw Error("No active attestation found for this skill.");null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500));let i=n(),o=this.state.trustScores.get(a);return o&&this.state.trustScores.set(a,{score:o.score>=BigInt(s.quality)?o.score-BigInt(s.quality):0n,count:o.count>0n?o.count-1n:0n,history:o.history.filter(t=>t.ts!==s.timestamp)}),s.revoked=!0,{txHash:i}}getMyAttestations(){return[...this.state.myAttestations]}async storeCredential(t,e){if(this.state.credentials.has(t.keyId))throw Error("Credential '".concat(t.keyId,"' already exists. Use rotateCredential() to replace."));return null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.set(t.keyId,{label:t.label,value:t.value}),{txHash:n()}}async getCredential(t){await i();let e=this.state.credentials.get(t);return e?{keyId:t,value:e.value,label:e.label}:null}async deleteCredential(t,e){if(!this.state.credentials.has(t))throw Error("No credential found with keyId '".concat(t,"'."));return null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.delete(t),{txHash:n()}}async rotateCredential(t,e){if(!this.state.credentials.has(t.keyId))throw Error("No credential found with keyId '".concat(t.keyId,"'."));return null==e||e("proving"),await r(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.set(t.keyId,{label:t.newLabel,value:t.newValue}),{txHash:n()}}listCredentials(){return Array.from(this.state.credentials.entries()).map(t=>{let[e,{label:a}]=t;return{keyId:e,label:a}})}async grantCredentialAccess(t){var e;return await i(),{authwitNonce:null!==(e=t.nonce)&&void 0!==e?e:BigInt(Date.now())}}constructor(t){this.state=function(t){let e=new Map;for(let t of s){let a=Date.now();e.set(t.hash.toLowerCase(),{score:t.score,count:t.count,history:t.history.map(t=>{let{quality:e,daysAgo:s}=t;return{quality:e,ts:new Date(a-864e5*s)}})})}return{trustScores:e,myAttestations:[],credentials:new Map,walletAddress:t}}(t)}}},8877:function(){}},function(t){t.O(0,[404,138,971,23,744],function(){return t(t.s=4073)}),_N_E=t.O()}]);