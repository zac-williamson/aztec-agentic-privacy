"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[792],{2792:function(t,e,a){a.r(e),a.d(e,{RealSdkWrapper:function(){return s}});class s{static async create(t,e){let a,n,r,i;try{a=(await import("@aztec/aztec.js")).createPXEClient,n=(await import("@aztec/aztec.js/addresses")).AztecAddress}catch(t){throw Error("Missing @aztec/aztec.js. Run: cd frontend && npm install @aztec/aztec.js@4.0.0-devnet.2-patch.0")}try{r=(await import("@aztec/accounts")).getDeployedTestAccounts}catch(t){throw Error("Missing @aztec/accounts. Run: cd frontend && npm install @aztec/accounts@4.0.0-devnet.2-patch.0")}try{i=(await import("@nullius/isnad")).IsnadSDK}catch(t){throw Error("Missing @nullius/isnad. Run: cd sdk && npm run build, then link or install the package.")}let l=a(t);try{await l.getNodeInfo()}catch(e){throw Error("Cannot reach PXE at ".concat(t,".\n")+"Ensure the Aztec local network is running:\n  aztec start --local-network")}let o=await r(l);if(0===o.length)throw Error("No test accounts on PXE.\nDid you run `aztec start --local-network`?\nFor production, implement Schnorr account creation here.");let c=await o[0].getWallet(),d=c.getAddress(),u=n.fromString(e);return new s(await i.connect(c,d,u),d.toString())}get walletAddress(){return this._walletAddress}async getTrustScore(t){return this.sdk.getTrustScore(t)}async getAttestationHistory(t){let e=t.toLowerCase();return this._myAttestations.map(t=>({quality:t.quality,ts:t.timestamp,type:t.revoked?"revoke":"attest"})).filter(t=>!!this._myAttestations.find(a=>a.skillHash.toLowerCase()===e&&a.timestamp===t.ts))}async attest(t,e){null==e||e("proving");let a=await this.sdk.attest(t);return null==e||e("submitting"),this._myAttestations.unshift({skillHash:t.skillHash,quality:t.quality,timestamp:new Date,txHash:a.txHash,revoked:!1}),a}async revokeAttestation(t,e){null==e||e("proving");let a=await this.sdk.revokeAttestation(t);null==e||e("submitting");let s=this._myAttestations.find(e=>e.skillHash.toLowerCase()===t.toLowerCase()&&!e.revoked);return s&&(s.revoked=!0),a}getMyAttestations(){return[...this._myAttestations]}async storeCredential(t,e){null==e||e("proving");let a=await this.sdk.storeCredential(t);return null==e||e("submitting"),this._credentialMap.set(t.keyId,{label:t.label}),a}async getCredential(t){return this.sdk.getCredential(t)}async deleteCredential(t,e){null==e||e("proving");let a=await this.sdk.deleteCredential(t);return null==e||e("submitting"),this._credentialMap.delete(t),a}async rotateCredential(t,e){null==e||e("proving");let a=await this.sdk.rotateCredential(t);return null==e||e("submitting"),this._credentialMap.set(t.keyId,{label:t.newLabel}),a}listCredentials(){return Array.from(this._credentialMap.entries()).map(t=>{let[e,{label:a}]=t;return{keyId:e,label:a}})}async grantCredentialAccess(t){return this.sdk.grantCredentialAccess(t)}constructor(t,e){this._myAttestations=[],this._credentialMap=new Map,this.sdk=t,this._walletAddress=e}}}}]);