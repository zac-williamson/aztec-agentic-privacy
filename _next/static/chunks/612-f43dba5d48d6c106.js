(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{251:function(t,e,n){"use strict";n.d(e,{Z:function(){return i}});var r=n(7437),s=n(2265);let a={idle:{label:"",detail:"",color:"bg-amber",pulse:!1},proving:{label:"Generating ZK proof",detail:"This takes 3–60 seconds depending on hardware. Your identity is never revealed.",color:"bg-amber",pulse:!0},submitting:{label:"Proof verified — submitting transaction",detail:"Broadcasting to the Aztec network...",color:"bg-signal-caution",pulse:!0},done:{label:"Transaction confirmed",detail:"",color:"bg-signal-trusted",pulse:!1},error:{label:"Transaction failed",detail:"",color:"bg-signal-danger",pulse:!1}};function i(t){let{phase:e,txHash:n,error:i,onDismiss:o}=t,[l,c]=(0,s.useState)(0);if((0,s.useEffect)(()=>{if("proving"!==e){c(0);return}let t=Date.now(),n=setInterval(()=>{c(Math.floor((Date.now()-t)/1e3))},500);return()=>clearInterval(n)},[e]),"idle"===e)return null;let u=a[e];return(0,r.jsxs)("div",{className:"\n      rounded border p-4 space-y-3\n      ".concat("done"===e?"border-signal-trusted/30 bg-signal-trusted/5":"","\n      ").concat("error"===e?"border-signal-danger/30 bg-signal-danger/5":"","\n      ").concat("proving"===e||"submitting"===e?"border-amber/30 bg-amber/5":"","\n    "),children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("span",{className:"\n            w-2 h-2 rounded-full shrink-0\n            ".concat(u.color,"\n            ").concat(u.pulse?"animate-pulse":"","\n          ")}),(0,r.jsx)("span",{className:"font-mono text-sm text-ink",children:u.label}),"proving"===e&&(0,r.jsxs)("span",{className:"font-mono text-xs text-ink-muted ml-auto",children:[l,"s"]}),("done"===e||"error"===e)&&o&&(0,r.jsx)("button",{onClick:o,className:"ml-auto text-ink-muted hover:text-ink text-xs font-mono",children:"dismiss"})]}),u.detail&&(0,r.jsx)("p",{className:"text-xs text-ink-muted font-mono",children:u.detail}),("proving"===e||"submitting"===e)&&(0,r.jsx)("div",{className:"relative h-0.5 bg-wire overflow-hidden rounded-full",children:(0,r.jsx)("div",{className:"absolute inset-y-0 w-1/3 bg-amber/60 scanline rounded-full"})}),"done"===e&&n&&(0,r.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,r.jsx)("span",{className:"text-xs text-ink-muted font-mono",children:"tx:"}),(0,r.jsxs)("a",{href:"#",className:"font-mono text-xs text-signal-trusted hover:underline break-all",title:n,children:[n.slice(0,18),"...",n.slice(-8)]})]}),"error"===e&&i&&(0,r.jsx)("p",{className:"text-xs text-signal-danger font-mono",children:i}),"proving"===e&&(0,r.jsx)("p",{className:"text-xs text-ink-faint font-mono border-t border-wire pt-2",children:"⬡ Your identity will not appear in public state. Only the trust score increments."})]})}},7781:function(t,e,n){"use strict";n.d(e,{Z:function(){return a}});var r=n(7437),s=n(2267);function a(t){let{children:e,message:n="Connect your wallet to use this feature."}=t,{isConnected:a,connect:i,isConnecting:o,error:l}=(0,s.c)();return a?(0,r.jsx)(r.Fragment,{children:e}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 gap-6",children:[(0,r.jsx)("div",{className:"text-4xl text-wire-100 font-mono select-none",children:"⬡"}),(0,r.jsxs)("div",{className:"text-center space-y-2",children:[(0,r.jsx)("p",{className:"text-ink-muted font-mono text-sm",children:n}),(0,r.jsx)("p",{className:"text-ink-faint font-mono text-xs",children:"Demo mode — no real wallet required"})]}),l&&(0,r.jsx)("p",{className:"font-mono text-xs text-signal-danger max-w-sm text-center",children:l}),(0,r.jsx)("button",{onClick:i,disabled:o,className:" px-6 py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2 ",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber animate-pulse"}),"Connecting to PXE..."]}):"Connect Wallet"})]})}},1266:function(t,e,n){"use strict";n.d(e,{v:function(){return i}});var r,s,a=n(357);let i={useMock:!0,pxeUrl:null!==(r=a.env.NEXT_PUBLIC_PXE_URL)&&void 0!==r?r:"http://localhost:8080",contractAddress:null!==(s=a.env.NEXT_PUBLIC_CONTRACT_ADDRESS)&&void 0!==s?s:"0x0000000000000000000000000000000000000000000000000000000000000000",appName:"The Isnad Chain",appDescription:"ZK Skill Attestation & Credential Registry for AI Agents",version:"0.1.0-devnet"}},2267:function(t,e,n){"use strict";n.d(e,{IsnadProvider:function(){return l},c:function(){return c}});var r=n(7437),s=n(2265),a=n(9768),i=n(1266);let o=(0,s.createContext)(null);function l(t){let{children:e}=t,[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[f,h]=(0,s.useState)(!1),[m,y]=(0,s.useState)(null),[g,p]=(0,s.useState)([]),[b,v]=(0,s.useState)([]),x=(0,s.useCallback)(()=>{l&&p(l.getMyAttestations())},[l]),w=(0,s.useCallback)(()=>{l&&v(l.listCredentials())},[l]),k=(0,s.useCallback)(async()=>{h(!0),y(null);try{if(i.v.useMock){let t="0x2f5e9c1a4b8d7f3e6a2c5b8d1f4e7a3c9b6e2d5f8a1c4b7e3d6a9f2c5b8e1d4";await new Promise(t=>setTimeout(t,800));let e=new a.zW(t);c(e),d(t)}else{let{RealSdkWrapper:t}=await n.e(792).then(n.bind(n,2792)),e=await t.create(i.v.pxeUrl,i.v.contractAddress);c(e),d(e.walletAddress)}}catch(t){y(t instanceof Error?t.message:"Connection failed")}finally{h(!1)}},[]),A=(0,s.useCallback)(()=>{c(null),d(null),p([]),v([]),y(null)},[]);(0,s.useEffect)(()=>{l&&(p(l.getMyAttestations()),v(l.listCredentials()))},[l]);let C=u?"".concat(u.slice(0,8),"...").concat(u.slice(-6)):null;return(0,r.jsx)(o.Provider,{value:{sdk:l,isConnected:null!==l,displayAddress:C,walletAddress:u,connect:k,disconnect:A,error:m,isConnecting:f,myAttestations:g,refreshAttestations:x,credentialList:b,refreshCredentials:w},children:e})}function c(){let t=(0,s.useContext)(o);if(!t)throw Error("useIsnad must be used within <IsnadProvider>");return t}},9768:function(t,e,n){"use strict";n.d(e,{ri:function(){return o},zW:function(){return l}});let r=[{hash:"0x7f3ac4b82d19e8a1f5b6c3d4e9f2a0b7c8d5e6f1a2b3c4d5e6f7a8b9c0d1e2f",score:847n,count:9n,history:[{quality:95,daysAgo:2},{quality:88,daysAgo:3},{quality:92,daysAgo:5},{quality:78,daysAgo:7},{quality:100,daysAgo:9},{quality:85,daysAgo:12},{quality:90,daysAgo:15},{quality:72,daysAgo:18},{quality:47,daysAgo:21}]},{hash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2",score:312n,count:4n,history:[{quality:88,daysAgo:1},{quality:75,daysAgo:4},{quality:82,daysAgo:6},{quality:67,daysAgo:10}]},{hash:"0xdeadbeefcafebabe0102030405060708090a0b0c0d0e0f101112131415161718",score:0n,count:0n,history:[]}];function s(){let t=new Uint8Array(32);return"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues(t),"0x"+Array.from(t).map(t=>t.toString(16).padStart(2,"0")).join("")}function a(){let t=3e3+2e3*Math.random();return new Promise(e=>setTimeout(e,t))}function i(){return new Promise(t=>setTimeout(t,300+200*Math.random()))}async function o(t){let e=await t.arrayBuffer();return"0x"+Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",e))).map(t=>t.toString(16).padStart(2,"0")).join("")}class l{get walletAddress(){return this.state.walletAddress}async getTrustScore(t){var e,n;await i();let r=t.toLowerCase(),s=this.state.trustScores.get(r);return{skillHash:t,trustScore:null!==(e=null==s?void 0:s.score)&&void 0!==e?e:0n,attestationCount:null!==(n=null==s?void 0:s.count)&&void 0!==n?n:0n}}async getAttestationHistory(t){var e;await i();let n=t.toLowerCase(),r=this.state.trustScores.get(n);return null!==(e=null==r?void 0:r.history)&&void 0!==e?e:[]}async attest(t,e){var n;let r=t.skillHash.toLowerCase();if(this.state.myAttestations.some(t=>t.skillHash.toLowerCase()===r&&!t.revoked))throw Error("You have already attested this skill (SingleUseClaim prevents double-attestation).");null==e||e("proving"),await a(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500));let i=s(),o=new Date,l=null!==(n=this.state.trustScores.get(r))&&void 0!==n?n:{score:0n,count:0n,history:[]};return this.state.trustScores.set(r,{score:l.score+BigInt(t.quality),count:l.count+1n,history:[{quality:t.quality,ts:o},...l.history]}),this.state.myAttestations.unshift({skillHash:t.skillHash,quality:t.quality,timestamp:o,txHash:i,revoked:!1}),{txHash:i}}async revokeAttestation(t,e){let n=t.toLowerCase(),r=this.state.myAttestations.find(t=>t.skillHash.toLowerCase()===n&&!t.revoked);if(!r)throw Error("No active attestation found for this skill.");null==e||e("proving"),await a(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500));let i=s(),o=this.state.trustScores.get(n);return o&&this.state.trustScores.set(n,{score:o.score>=BigInt(r.quality)?o.score-BigInt(r.quality):0n,count:o.count>0n?o.count-1n:0n,history:o.history.filter(t=>t.ts!==r.timestamp)}),r.revoked=!0,{txHash:i}}getMyAttestations(){return[...this.state.myAttestations]}async storeCredential(t,e){if(this.state.credentials.has(t.keyId))throw Error("Credential '".concat(t.keyId,"' already exists. Use rotateCredential() to replace."));return null==e||e("proving"),await a(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.set(t.keyId,{label:t.label,value:t.value}),{txHash:s()}}async getCredential(t){await i();let e=this.state.credentials.get(t);return e?{keyId:t,value:e.value,label:e.label}:null}async deleteCredential(t,e){if(!this.state.credentials.has(t))throw Error("No credential found with keyId '".concat(t,"'."));return null==e||e("proving"),await a(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.delete(t),{txHash:s()}}async rotateCredential(t,e){if(!this.state.credentials.has(t.keyId))throw Error("No credential found with keyId '".concat(t.keyId,"'."));return null==e||e("proving"),await a(),null==e||e("submitting"),await new Promise(t=>setTimeout(t,500)),this.state.credentials.set(t.keyId,{label:t.newLabel,value:t.newValue}),{txHash:s()}}listCredentials(){return Array.from(this.state.credentials.entries()).map(t=>{let[e,{label:n}]=t;return{keyId:e,label:n}})}async grantCredentialAccess(t){var e;return await i(),{authwitNonce:null!==(e=t.nonce)&&void 0!==e?e:BigInt(Date.now())}}constructor(t){this.state=function(t){let e=new Map;for(let t of r){let n=Date.now();e.set(t.hash.toLowerCase(),{score:t.score,count:t.count,history:t.history.map(t=>{let{quality:e,daysAgo:r}=t;return{quality:e,ts:new Date(n-864e5*r)}})})}return{trustScores:e,myAttestations:[],credentials:new Map,walletAddress:t}}(t)}}},357:function(t,e,n){"use strict";var r,s;t.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(s=n.g.process)?void 0:s.env)?n.g.process:n(8081)},8081:function(t){!function(){var e={229:function(t){var e,n,r,s=t.exports={};function a(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===a||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(n){try{return e.call(null,t,0)}catch(n){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:a}catch(t){e=a}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}}();var l=[],c=!1,u=-1;function d(){c&&r&&(c=!1,r.length?l=r.concat(l):u=-1,l.length&&f())}function f(){if(!c){var t=o(d);c=!0;for(var e=l.length;e;){for(r=l,l=[];++u<e;)r&&r[u].run();u=-1,e=l.length}r=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function m(){}s.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new h(t,e)),1!==l.length||c||o(f)},h.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=m,s.addListener=m,s.once=m,s.off=m,s.removeListener=m,s.removeAllListeners=m,s.emit=m,s.prependListener=m,s.prependOnceListener=m,s.listeners=function(t){return[]},s.binding=function(t){throw Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw Error("process.chdir is not supported")},s.umask=function(){return 0}}},n={};function r(t){var s=n[t];if(void 0!==s)return s.exports;var a=n[t]={exports:{}},i=!0;try{e[t](a,a.exports,r),i=!1}finally{i&&delete n[t]}return a.exports}r.ab="//";var s=r(229);t.exports=s}()}}]);