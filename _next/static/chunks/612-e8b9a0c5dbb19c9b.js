"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[612],{251:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(7437),s=a(2265);let r={idle:{label:"",detail:"",color:"bg-amber",pulse:!1},proving:{label:"Generating ZK proof",detail:"This takes 3–60 seconds depending on hardware. Your identity is never revealed.",color:"bg-amber",pulse:!0},submitting:{label:"Proof verified — submitting transaction",detail:"Broadcasting to the Aztec network...",color:"bg-signal-caution",pulse:!0},done:{label:"Transaction confirmed",detail:"",color:"bg-signal-trusted",pulse:!1},error:{label:"Transaction failed",detail:"",color:"bg-signal-danger",pulse:!1}};function i(e){let{phase:t,txHash:a,error:i,onDismiss:o}=e,[l,c]=(0,s.useState)(0);if((0,s.useEffect)(()=>{if("proving"!==t){c(0);return}let e=Date.now(),a=setInterval(()=>{c(Math.floor((Date.now()-e)/1e3))},500);return()=>clearInterval(a)},[t]),"idle"===t)return null;let u=r[t];return(0,n.jsxs)("div",{className:"\n      rounded border p-4 space-y-3\n      ".concat("done"===t?"border-signal-trusted/30 bg-signal-trusted/5":"","\n      ").concat("error"===t?"border-signal-danger/30 bg-signal-danger/5":"","\n      ").concat("proving"===t||"submitting"===t?"border-amber/30 bg-amber/5":"","\n    "),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("span",{className:"\n            w-2 h-2 rounded-full shrink-0\n            ".concat(u.color,"\n            ").concat(u.pulse?"animate-pulse":"","\n          ")}),(0,n.jsx)("span",{className:"font-mono text-sm text-ink",children:u.label}),"proving"===t&&(0,n.jsxs)("span",{className:"font-mono text-xs text-ink-muted ml-auto",children:[l,"s"]}),("done"===t||"error"===t)&&o&&(0,n.jsx)("button",{onClick:o,className:"ml-auto text-ink-muted hover:text-ink text-xs font-mono",children:"dismiss"})]}),u.detail&&(0,n.jsx)("p",{className:"text-xs text-ink-muted font-mono",children:u.detail}),("proving"===t||"submitting"===t)&&(0,n.jsx)("div",{className:"relative h-0.5 bg-wire overflow-hidden rounded-full",children:(0,n.jsx)("div",{className:"absolute inset-y-0 w-1/3 bg-amber/60 scanline rounded-full"})}),"done"===t&&a&&(0,n.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,n.jsx)("span",{className:"text-xs text-ink-muted font-mono",children:"tx:"}),(0,n.jsxs)("a",{href:"#",className:"font-mono text-xs text-signal-trusted hover:underline break-all",title:a,children:[a.slice(0,18),"...",a.slice(-8)]})]}),"error"===t&&i&&(0,n.jsx)("p",{className:"text-xs text-signal-danger font-mono",children:i}),"proving"===t&&(0,n.jsx)("p",{className:"text-xs text-ink-faint font-mono border-t border-wire pt-2",children:"⬡ Your identity will not appear in public state. Only the trust score increments."})]})}},7781:function(e,t,a){a.d(t,{Z:function(){return r}});var n=a(7437),s=a(2267);function r(e){let{children:t,message:a="Connect your wallet to use this feature."}=e,{isConnected:r,connect:i,isConnecting:o,error:l}=(0,s.c)();return r?(0,n.jsx)(n.Fragment,{children:t}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center py-24 gap-6",children:[(0,n.jsx)("div",{className:"text-4xl text-wire-100 font-mono select-none",children:"⬡"}),(0,n.jsxs)("div",{className:"text-center space-y-2",children:[(0,n.jsx)("p",{className:"text-ink-muted font-mono text-sm",children:a}),(0,n.jsx)("p",{className:"text-ink-faint font-mono text-xs",children:"Demo mode — no real wallet required"})]}),l&&(0,n.jsx)("p",{className:"font-mono text-xs text-signal-danger max-w-sm text-center",children:l}),(0,n.jsx)("button",{onClick:i,disabled:o,className:" px-6 py-2.5 rounded border border-amber/50 text-amber font-mono text-sm hover:bg-amber/5 hover:border-amber transition-colors disabled:opacity-40 disabled:cursor-not-allowed flex items-center gap-2 ",children:o?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"w-2 h-2 rounded-full bg-amber animate-pulse"}),"Connecting to PXE..."]}):"Connect Wallet"})]})}},1266:function(e,t,a){a.d(t,{v:function(){return n}});let n={useMock:!0,pxeUrl:"http://localhost:8080",contractAddress:"0x127bfb034e149e8ce44b0036833a0bb1ab230930a7ea814fea7eac1a4bcb2747",appName:"The Isnad Chain",appDescription:"ZK Skill Attestation & Credential Registry for AI Agents",version:"0.1.0-devnet"}},2267:function(e,t,a){a.d(t,{IsnadProvider:function(){return l},c:function(){return c}});var n=a(7437),s=a(2265),r=a(9768),i=a(1266);let o=(0,s.createContext)(null);function l(e){let{children:t}=e,[l,c]=(0,s.useState)(null),[u,d]=(0,s.useState)(null),[m,h]=(0,s.useState)(!1),[f,y]=(0,s.useState)(null),[b,g]=(0,s.useState)([]),[x,p]=(0,s.useState)([]),w=(0,s.useCallback)(()=>{l&&g(l.getMyAttestations())},[l]),v=(0,s.useCallback)(()=>{l&&p(l.listCredentials())},[l]),k=(0,s.useCallback)(async()=>{h(!0),y(null);try{if(i.v.useMock){let e="0x2f5e9c1a4b8d7f3e6a2c5b8d1f4e7a3c9b6e2d5f8a1c4b7e3d6a9f2c5b8e1d4";await new Promise(e=>setTimeout(e,800));let t=new r.zW(e);c(t),d(e)}else{let{RealSdkWrapper:e}=await a.e(792).then(a.bind(a,2792)),t=await e.create(i.v.pxeUrl,i.v.contractAddress);c(t),d(t.walletAddress)}}catch(e){y(e instanceof Error?e.message:"Connection failed")}finally{h(!1)}},[]),A=(0,s.useCallback)(()=>{c(null),d(null),g([]),p([]),y(null)},[]);(0,s.useEffect)(()=>{l&&(g(l.getMyAttestations()),p(l.listCredentials()))},[l]);let C=u?"".concat(u.slice(0,8),"...").concat(u.slice(-6)):null;return(0,n.jsx)(o.Provider,{value:{sdk:l,isConnected:null!==l,displayAddress:C,walletAddress:u,connect:k,disconnect:A,error:f,isConnecting:m,myAttestations:b,refreshAttestations:w,credentialList:x,refreshCredentials:v},children:t})}function c(){let e=(0,s.useContext)(o);if(!e)throw Error("useIsnad must be used within <IsnadProvider>");return e}},9768:function(e,t,a){a.d(t,{ri:function(){return o},zW:function(){return l}});let n=[{hash:"0x7f3ac4b82d19e8a1f5b6c3d4e9f2a0b7c8d5e6f1a2b3c4d5e6f7a8b9c0d1e2f",score:847n,count:9n,history:[{quality:95,daysAgo:2},{quality:88,daysAgo:3},{quality:92,daysAgo:5},{quality:78,daysAgo:7},{quality:100,daysAgo:9},{quality:85,daysAgo:12},{quality:90,daysAgo:15},{quality:72,daysAgo:18},{quality:47,daysAgo:21}]},{hash:"0x1a2b3c4d5e6f7a8b9c0d1e2f3a4b5c6d7e8f9a0b1c2d3e4f5a6b7c8d9e0f1a2",score:312n,count:4n,history:[{quality:88,daysAgo:1},{quality:75,daysAgo:4},{quality:82,daysAgo:6},{quality:67,daysAgo:10}]},{hash:"0xdeadbeefcafebabe0102030405060708090a0b0c0d0e0f101112131415161718",score:0n,count:0n,history:[]}];function s(){let e=new Uint8Array(32);return"undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues(e),"0x"+Array.from(e).map(e=>e.toString(16).padStart(2,"0")).join("")}function r(){let e=3e3+2e3*Math.random();return new Promise(t=>setTimeout(t,e))}function i(){return new Promise(e=>setTimeout(e,300+200*Math.random()))}async function o(e){let t=await e.arrayBuffer();return"0x"+Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}class l{get walletAddress(){return this.state.walletAddress}async getTrustScore(e){var t,a;await i();let n=e.toLowerCase(),s=this.state.trustScores.get(n);return{skillHash:e,trustScore:null!==(t=null==s?void 0:s.score)&&void 0!==t?t:0n,attestationCount:null!==(a=null==s?void 0:s.count)&&void 0!==a?a:0n}}async getAttestationHistory(e){var t;await i();let a=e.toLowerCase(),n=this.state.trustScores.get(a);return null!==(t=null==n?void 0:n.history)&&void 0!==t?t:[]}async attest(e,t){var a;let n=e.skillHash.toLowerCase();if(this.state.myAttestations.some(e=>e.skillHash.toLowerCase()===n&&!e.revoked))throw Error("You have already attested this skill (SingleUseClaim prevents double-attestation).");null==t||t("proving"),await r(),null==t||t("submitting"),await new Promise(e=>setTimeout(e,500));let i=s(),o=new Date,l=null!==(a=this.state.trustScores.get(n))&&void 0!==a?a:{score:0n,count:0n,history:[]};return this.state.trustScores.set(n,{score:l.score+BigInt(e.quality),count:l.count+1n,history:[{quality:e.quality,ts:o},...l.history]}),this.state.myAttestations.unshift({skillHash:e.skillHash,quality:e.quality,timestamp:o,txHash:i,revoked:!1}),{txHash:i}}async revokeAttestation(e,t){let a=e.toLowerCase(),n=this.state.myAttestations.find(e=>e.skillHash.toLowerCase()===a&&!e.revoked);if(!n)throw Error("No active attestation found for this skill.");null==t||t("proving"),await r(),null==t||t("submitting"),await new Promise(e=>setTimeout(e,500));let i=s(),o=this.state.trustScores.get(a);return o&&this.state.trustScores.set(a,{score:o.score>=BigInt(n.quality)?o.score-BigInt(n.quality):0n,count:o.count>0n?o.count-1n:0n,history:o.history.filter(e=>e.ts!==n.timestamp)}),n.revoked=!0,{txHash:i}}getMyAttestations(){return[...this.state.myAttestations]}async storeCredential(e,t){if(this.state.credentials.has(e.keyId))throw Error("Credential '".concat(e.keyId,"' already exists. Use rotateCredential() to replace."));return null==t||t("proving"),await r(),null==t||t("submitting"),await new Promise(e=>setTimeout(e,500)),this.state.credentials.set(e.keyId,{label:e.label,value:e.value}),{txHash:s()}}async getCredential(e){await i();let t=this.state.credentials.get(e);return t?{keyId:e,value:t.value,label:t.label}:null}async deleteCredential(e,t){if(!this.state.credentials.has(e))throw Error("No credential found with keyId '".concat(e,"'."));return null==t||t("proving"),await r(),null==t||t("submitting"),await new Promise(e=>setTimeout(e,500)),this.state.credentials.delete(e),{txHash:s()}}async rotateCredential(e,t){if(!this.state.credentials.has(e.keyId))throw Error("No credential found with keyId '".concat(e.keyId,"'."));return null==t||t("proving"),await r(),null==t||t("submitting"),await new Promise(e=>setTimeout(e,500)),this.state.credentials.set(e.keyId,{label:e.newLabel,value:e.newValue}),{txHash:s()}}listCredentials(){return Array.from(this.state.credentials.entries()).map(e=>{let[t,{label:a}]=e;return{keyId:t,label:a}})}async grantCredentialAccess(e){var t;return await i(),{authwitNonce:null!==(t=e.nonce)&&void 0!==t?t:BigInt(Date.now())}}constructor(e){this.state=function(e){let t=new Map;for(let e of n){let a=Date.now();t.set(e.hash.toLowerCase(),{score:e.score,count:e.count,history:e.history.map(e=>{let{quality:t,daysAgo:n}=e;return{quality:t,ts:new Date(a-864e5*n)}})})}return{trustScores:t,myAttestations:[],credentials:new Map,walletAddress:e}}(e)}}}}]);